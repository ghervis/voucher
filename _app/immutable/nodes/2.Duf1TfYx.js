import"../chunks/NZTpNUN0.js";import"../chunks/BBLlqHv5.js";import{s as We,j as Y,K as Zr,V as eo,k as to,i as ro,g as e,aj as Xt,l as oo,m as ao,n as Gt,o as Ze,v as xe,X as so,$ as no,p as Qt,q as Wt,t as io,a2 as Zt,T as er,at as E,ay as jt,az as et,O as zt,aA as lo,aB as co,aC as uo,L as vo,aD as fo,aE as ho,aF as mo,aG as po,Y as go,w as bo,Q as xo,aH as _o,aI as wo,aJ as yo,aK as Co,aL as ko,aM as No,aN as Eo,aO as So,b as T,x as Ao,z as Vo,aP as _e,aQ as Mo,A as U,B as tt,C as oe,G as i,J as h,D as S,F as Do,al as d,I as n,aR as Lo,aS as J,aT as ye,ax as To,av as $o,aU as Fo,aV as Io}from"../chunks/DRkcCToG.js";import{l as tr,a as Ho,o as Oo,e as L,r as Ro,s as X,b as Uo}from"../chunks/D-bh-y95.js";import{b as qo}from"../chunks/BEbB9tNh.js";import{i as R,b as Ve}from"../chunks/Cegzo3ME.js";import{i as Bo}from"../chunks/BMt-1YD5.js";function Go(r,o){return o}function jo(r,o,a,u){for(var v=[],f=o.length,p=0;p<f;p++)uo(o[p].e,v,!0);var x=f>0&&v.length===0&&a!==null;if(x){var F=a.parentNode;vo(F),F.append(a),u.clear(),le(r,o[0].prev,o[f-1].next)}fo(v,()=>{for(var q=0;q<f;q++){var g=o[q];x||(u.delete(g.k),le(r,g.prev,g.next)),ho(g.e,!x)}})}function zo(r,o,a,u,v,f=null){var p=r,x={flags:o,items:new Map,first:null};{var F=r;p=Y?We(Zr(F)):F.appendChild(eo())}Y&&to();var q=null,g=!1,V=Xt(()=>{var b=a();return er(b)?b:b==null?[]:Zt(b)});ro(()=>{var b=e(V),c=b.length;if(g&&c===0)return;g=c===0;let N=!1;if(Y){var ne=oo(p)===ao;ne!==(c===0)&&(p=Gt(),We(p),Ze(!1),N=!0)}if(Y){for(var K=null,_,w=0;w<c;w++){if(xe.nodeType===so&&xe.data===no){p=xe,N=!0,Ze(!1);break}var Q=b[w],B=u(Q,w);_=rr(xe,x,K,null,Q,B,w,v,o,a),x.items.set(B,_),K=_}c>0&&We(Gt())}Y||Po(b,x,p,v,o,u,a),f!==null&&(c===0?q?Qt(q):q=Wt(()=>f(p)):q!==null&&io(q,()=>{q=null})),N&&Ze(!0),e(V)}),Y&&(p=xe)}function Po(r,o,a,u,v,f,p){var x=r.length,F=o.items,q=o.first,g=q,V,b=null,c=[],N=[],ne,K,_,w;for(w=0;w<x;w+=1){if(ne=r[w],K=f(ne,w),_=F.get(K),_===void 0){var Q=g?g.e.nodes_start:a;b=rr(Q,o,b,b===null?o.first:b.next,ne,K,w,u,v,p),F.set(K,b),c=[],N=[],g=b.next;continue}if(Jo(_,ne,w),(_.e.f&et)!==0&&Qt(_.e),_!==g){if(V!==void 0&&V.has(_)){if(c.length<N.length){var B=N[0],G;b=B.prev;var ae=c[0],Z=c[c.length-1];for(G=0;G<c.length;G+=1)Pt(c[G],B,a);for(G=0;G<N.length;G+=1)V.delete(N[G]);le(o,ae.prev,Z.next),le(o,b,ae),le(o,Z,B),g=B,b=Z,w-=1,c=[],N=[]}else V.delete(_),Pt(_,g,a),le(o,_.prev,_.next),le(o,_,b===null?o.first:b.next),le(o,b,_),b=_;continue}for(c=[],N=[];g!==null&&g.k!==K;)(g.e.f&et)===0&&(V??=new Set).add(g),N.push(g),g=g.next;if(g===null)continue;_=g}c.push(_),b=_,g=_.next}if(g!==null||V!==void 0){for(var W=V===void 0?[]:Zt(V);g!==null;)(g.e.f&et)===0&&W.push(g),g=g.next;var ce=W.length;if(ce>0){var se=x===0?a:null;jo(o,W,se,F)}}zt.first=o.first&&o.first.e,zt.last=b&&b.e}function Jo(r,o,a,u){co(r.v,o),r.i=a}function rr(r,o,a,u,v,f,p,x,F,q){var g=(F&mo)!==0,V=(F&po)===0,b=g?V?E(v,!1,!1):jt(v):v,c=(F&lo)===0?p:jt(p),N={i:c,v:b,k:f,a:null,e:null,prev:a,next:u};try{return N.e=Wt(()=>x(r,b,c,q),Y),N.e.prev=a&&a.e,N.e.next=u&&u.e,a===null?o.first=N:(a.next=N,a.e.next=N.e),u!==null&&(u.prev=N,u.e.prev=N.e),N}finally{}}function Pt(r,o,a){for(var u=r.next?r.next.e.nodes_start:a,v=o?o.e.nodes_start:a,f=r.e.nodes_start;f!==u;){var p=go(f);v.before(f),f=p}}function le(r,o,a){o===null?r.first=a:(o.next=a,o.e.next=a&&a.e),a!==null&&(a.prev=o,a.e.prev=o&&o.e)}function Yo(r,o,a){var u=r==null?"":""+r;return u===""?null:u}function Ko(r,o){return r==null?null:String(r)}function Jt(r,o,a,u,v,f){var p=r.__className;if(Y||p!==a||p===void 0){var x=Yo(a);(!Y||x!==r.getAttribute("class"))&&(x==null?r.removeAttribute("class"):r.className=x),r.__className=a}return f}function Xo(r,o,a,u){var v=r.__style;if(Y||v!==o){var f=Ko(o);(!Y||f!==r.getAttribute("style"))&&(f==null?r.removeAttribute("style"):r.style.cssText=f),r.__style=o}return u}function or(r,o,a=!1){if(r.multiple){if(o==null)return;if(!er(o))return _o();for(var u of r.options)u.selected=o.includes(we(u));return}for(u of r.options){var v=we(u);if(wo(v,o)){u.selected=!0;return}}(!a||o!==void 0)&&(r.selectedIndex=-1)}function Qo(r){var o=new MutationObserver(()=>{or(r,r.__value)});o.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),xo(()=>{o.disconnect()})}function Wo(r,o,a=o){var u=!0;tr(r,"change",v=>{var f=v?"[selected]":":checked",p;if(r.multiple)p=[].map.call(r.querySelectorAll(f),we);else{var x=r.querySelector(f)??r.querySelector("option:not([disabled])");p=x&&we(x)}a(p)}),bo(()=>{var v=o();if(or(r,v,u),u&&v===void 0){var f=r.querySelector(":checked");f!==null&&(v=we(f),a(v))}r.__value=v,u=!1}),Qo(r)}function we(r){return"__value"in r?r.__value:r.value}const Zo=Symbol("is custom element"),ea=Symbol("is html");function Yt(r){if(Y){var o=!1,a=()=>{if(!o){if(o=!0,r.hasAttribute("value")){var u=r.value;Me(r,"value",null),r.value=u}if(r.hasAttribute("checked")){var v=r.checked;Me(r,"checked",null),r.checked=v}}};r.__on_r=a,yo(a),Ho()}}function Me(r,o,a,u){var v=ta(r);Y&&(v[o]=r.getAttribute(o),o==="src"||o==="srcset"||o==="href"&&r.nodeName==="LINK")||v[o]!==(v[o]=a)&&(o==="loading"&&(r[Co]=a),a==null?r.removeAttribute(o):typeof a!="string"&&ra(r).includes(o)?r[o]=a:r.setAttribute(o,a))}function ta(r){return r.__attributes??={[Zo]:r.nodeName.includes("-"),[ea]:r.namespaceURI===ko}}var Kt=new Map;function ra(r){var o=Kt.get(r.nodeName);if(o)return o;Kt.set(r.nodeName,o=[]);for(var a,u=r,v=Element.prototype;v!==u;){a=Eo(u);for(var f in a)a[f].set&&o.push(f);u=No(u)}return o}function rt(r,o,a=o){var u=So();tr(r,"input",v=>{var f=v?r.defaultValue:r.value;if(f=ot(r)?at(f):f,a(f),u&&f!==(f=o())){var p=r.selectionStart,x=r.selectionEnd;r.value=f??"",x!==null&&(r.selectionStart=p,r.selectionEnd=Math.min(x,r.value.length))}}),(Y&&r.defaultValue!==r.value||T(o)==null&&r.value)&&a(ot(r)?at(r.value):r.value),Ao(()=>{var v=o();ot(r)&&v===at(r.value)||r.type==="date"&&!v&&!r.value||v!==r.value&&(r.value=v??"")})}function ot(r){var o=r.type;return o==="number"||o==="range"}function at(r){return r===""?null:+r}function oa(r){return function(...o){var a=o[0];return a.preventDefault(),r?.apply(this,o)}}var aa=U('<div class="text-gray-700"> </div>'),sa=ye('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"></path></svg>'),na=ye('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>'),ia=U('<div class="text-green-700 font-semibold flex items-center"><span> </span> <button class="p-1 hover:bg-gray-100 rounded transition-colors"><!></button></div>'),la=ye('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"></path></svg>'),ca=ye('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>'),da=U('<div class="text-pink-700 font-semibold flex items-center"><span> </span> <button class="p-1 hover:bg-gray-100 rounded transition-colors"><!></button></div>'),ua=U('<div class="text-gray-500"> </div>'),va=U('<div class="text-sm sm:text-base font-medium space-y-1"><!> <!> <!> <!></div>'),fa=ye('<svg class="animate-spin h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),ha=U('<div class="fixed top-20 right-4 bg-green-600 text-white px-4 py-3 rounded-lg shadow-lg z-20 flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> <span class="text-sm font-medium"> </span></div>'),ma=U('<div class="bg-red-50 border border-red-200 rounded-lg p-4 sm:p-6 mb-6 sm:mb-8 mx-2 sm:mx-0"><h3 class="text-red-800 font-semibold mb-2 text-sm sm:text-base">Error Loading Data</h3> <p class="text-red-600 mb-4 text-sm"> </p> <button class="w-full sm:w-auto px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors text-sm">Try Again</button></div>'),pa=U('<div class="absolute top-0 right-0 flex gap-2"><button class="px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors text-sm shadow-sm" title="Edit voucher">Edit</button> <button class="px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 transition-colors text-sm shadow-sm" title="Delete voucher">Delete</button></div>'),ga=U('<div class="absolute top-0 right-0 flex gap-2"><button class="px-3 py-1 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors text-sm shadow-sm" title="Hide voucher">Hide</button></div>'),ba=U('<div class="mt-3 relative"><details class="w-full"><summary class="cursor-pointer text-sm font-semibold text-gray-700 hover:text-gray-900 py-1"> </summary> <div class="mt-3 p-3 bg-white/95 rounded border border-white/60 text-sm space-y-2 shadow-sm"><div><p class="text-gray-600 mt-1 leading-relaxed"> </p></div></div></details> <!></div>'),xa=U('<div><div class="mb-3"><button title="Click to copy voucher code" aria-label="Copy voucher code"><span class="flex-1 text-left"> </span> <div class="flex items-center gap-2 ml-2 flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg></div></button></div> <!></div>'),_a=U('<div class="space-y-3 sm:space-y-4 mb-6 sm:mb-8"></div>'),wa=U('<div class="text-center py-8 bg-gray-50 rounded-lg border border-gray-200"><p class="text-gray-500 mb-2">No vouchers available</p> <p class="text-sm text-gray-400">Add a custom voucher or refresh to fetch GrabFood vouchers</p></div>'),ya=U('<div class="text-center py-8"><div class="inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"></div> <p class="text-gray-600 mt-2 text-sm">Fetching more vouchers...</p></div>'),Ca=U("<!> <!>",1),ka=U(`<div class="h-screen flex flex-col bg-cover bg-center bg-no-repeat"><div class="sticky top-0 z-10 bg-white border-b border-gray-200 shadow-sm"><div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4"><div class="flex flex-row items-start justify-between gap-4"><div class="flex-1"><!></div> <div class="flex flex-col gap-2 items-end flex-shrink-0"><button class="px-4 sm:px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium text-xs sm:text-sm whitespace-nowrap">Add Custom Voucher</button> <div class="flex gap-2"><button class="px-4 sm:px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium text-xs sm:text-sm whitespace-nowrap"><!></button> <button class="px-4 sm:px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-medium text-xs sm:text-sm whitespace-nowrap" title="Clear cache and fetch fresh data">Force</button></div></div></div></div></div> <div class="flex-1 overflow-y-auto"><div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-8"><!> <!> <!></div></div></div> <dialog class="p-0 rounded-lg shadow-xl max-w-md svelte-1w11x2y" style="margin: 1rem auto; width: calc(100% - 2rem);"><div class="p-6"><div class="flex justify-between items-center mb-4"><h3 class="text-lg font-semibold text-purple-800"> </h3> <button class="text-gray-400 hover:text-gray-600 transition-colors" aria-label="Close modal"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="mb-4 p-2 bg-blue-50 border border-blue-200 rounded-lg"><div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-blue-600 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <p class="text-xs text-blue-700">Only you can see this addition.</p></div></div> <form class="space-y-4"><div><label for="modal-voucher-code" class="block text-sm font-medium text-gray-700 mb-1">Voucher Code *</label> <input id="modal-voucher-code" type="text" placeholder="Enter voucher code" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"/></div> <div><label for="modal-voucher-merchant" class="block text-sm font-medium text-gray-700 mb-1">Merchant *</label> <select id="modal-voucher-merchant" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"><option>GrabFood</option><option>Foodpanda</option></select></div> <div><label for="modal-voucher-cta" class="block text-sm font-medium text-gray-700 mb-1">Title *</label> <input id="modal-voucher-cta" type="text" placeholder="e.g., 'Save 20% on your order'" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"/></div> <div><label for="modal-voucher-description" class="block text-sm font-medium text-gray-700 mb-1">Description</label> <textarea id="modal-voucher-description" placeholder="Enter description (optional)" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea></div> <div class="flex gap-2 pt-4"><button type="submit" class="flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium text-sm"> </button> <button type="button" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium text-sm">Cancel</button></div></form></div></dialog> <dialog class="p-0 rounded-lg shadow-xl max-w-sm svelte-1w11x2y" style="margin: 1rem auto; width: calc(100% - 2rem);"><div class="p-6"><div class="flex items-center gap-3 mb-4"><div class="flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.502 0L4.312 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div> <div class="flex-1"><h3 class="text-lg font-semibold text-gray-900">Delete Voucher</h3> <p class="text-sm text-gray-600 mt-1"> </p></div></div> <div class="flex gap-3 justify-end"><button type="button" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium text-sm">Cancel</button> <button type="button" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium text-sm">Delete</button></div></div></dialog> <dialog class="p-0 rounded-lg shadow-xl max-w-sm svelte-1w11x2y" style="margin: 1rem auto; width: calc(100% - 2rem);"><div class="p-6"><div class="flex items-center gap-3 mb-4"><div class="flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-yellow-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L12 12"></path></svg></div> <div class="flex-1"><h3 class="text-lg font-semibold text-gray-900">Hide Voucher</h3> <p class="text-sm text-gray-600 mt-1"> </p></div></div> <div class="flex gap-3 justify-end"><button type="button" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium text-sm">Cancel</button> <button type="button" class="px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors font-medium text-sm">Hide</button></div></div></dialog> <dialog class="p-0 rounded-lg shadow-xl max-w-sm svelte-1w11x2y" style="margin: 1rem auto; width: calc(100% - 2rem);"><div class="p-6"><div class="flex items-center gap-3 mb-4"><div class="flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-orange-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.502 0L4.312 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div> <div class="flex-1"><h3 class="text-lg font-semibold text-gray-900">Force Refresh</h3> <p class="text-sm text-gray-600 mt-1">This will clear all cached data and fetch fresh vouchers. Any hidden
          vouchers will reappear. Continue?</p></div></div> <div class="flex gap-3 justify-end"><button type="button" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium text-sm">Cancel</button> <button type="button" class="px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-medium text-sm">Force Refresh</button></div></div></dialog>`,1);function Na(r,o){Vo(o,!1);const a=E(),u=E(),v=E(),f=E(),p=E(),x="grabfood-voucher-cache",F=2*30*24*60*60*1e3,q=["NoCodeRequired","NoCouponRequired"];function g(t){return q.includes(t)}let V=E(!0),b=E(null),c=E([]),N=[],ne=[],K=E(null),_=null,w=E([]),Q=E(null),B=E(""),G=E(""),ae=E(""),Z=E("GrabFood"),W=E(),ce=E(),se=E(null),he=E(),de=E(null),me=E(),j=E([]),y=E({});const De="voucher-category-visibility",st="grabfood-custom-vouchers",ar=["NoCodeRequired","NoCouponRequired"];function sr(){try{const t=localStorage.getItem(st);t&&d(w,JSON.parse(t))}catch(t){console.error("Error loading custom vouchers:",t)}}function Le(){try{localStorage.setItem(st,JSON.stringify(e(w)))}catch(t){console.error("Error saving custom vouchers:",t)}}function nr(){try{d(j,[]);for(let t=0;t<localStorage.length;t++){const l=localStorage.key(t);if(l&&l.startsWith(x)){const m=localStorage.getItem(l);if(m&&JSON.parse(m).hidden){const z=l.replace(`${x}-`,"");e(j).push(z)}}}d(j,[...e(j)])}catch(t){console.error("Error loading hidden vouchers:",t)}}function ir(t){if(!e(j).includes(t)){let l=it(t);l||(l={code:null,expire:Date.now()+F,hidden:!1});const m={...l,expire:Date.now()+F,hidden:!0};localStorage.setItem(`${x}-${t}`,JSON.stringify(m)),d(j,[...e(j),t])}}function lr(){if(!e(B).trim())return;const t={id:Date.now().toString(),code:e(B).trim(),description:e(G).trim()||"Custom voucher",cta:e(ae).trim()||"Use this code",merchantName:e(Z)};d(w,[t,...e(w)]),Le(),Te(),e(W).close()}function cr(){!e(Q)||!e(B).trim()||(d(w,e(w).map(t=>t.id===e(Q).id?{...t,code:e(B).trim(),description:e(G).trim()||"Custom voucher",cta:e(ae).trim()||"Use this code",merchantName:e(Z)}:t)),Le(),Te(),e(W).close())}function dr(t){d(w,e(w).filter(l=>l.id!==t)),Le()}function ur(t){d(se,t),e(ce).showModal()}function vr(){e(se)&&(dr(e(se).id),d(se,null)),e(ce).close()}function fr(){d(se,null),e(ce).close()}function hr(t){d(de,t),e(he).showModal()}function mr(){e(de)&&(ir(e(de).id),d(de,null)),e(he).close()}function pr(){d(de,null),e(he).close()}function gr(){e(me).showModal()}function br(){e(me).close(),Ar()}function xr(){e(me).close()}function _r(t){d(Q,t),d(B,t.code),d(G,t.description),d(ae,t.cta),d(Z,t.merchantName||"GrabFood"),e(W).showModal()}function Te(){d(Q,null),d(B,""),d(G,""),d(ae,""),d(Z,"GrabFood")}function wr(){try{const t=localStorage.getItem(De);t&&d(y,JSON.parse(t))}catch(t){console.error("Error loading category visibility:",t),d(y,{})}}function yr(){try{localStorage.setItem(De,JSON.stringify(e(y)))}catch(t){console.error("Error saving category visibility:",t)}}function nt(t){if(t==="grabfood"||t==="foodpanda")if(e(y)[t])J(y,e(y)[t]=!1);else{J(y,e(y)[t]=!0);const l=t==="grabfood"?"foodpanda":"grabfood";J(y,e(y)[l]=!1)}else J(y,e(y)[t]=!e(y)[t]);yr()}function Cr(){d(y,{}),localStorage.removeItem(De)}function it(t){try{const l=localStorage.getItem(`${x}-${t}`);if(!l)return null;const m=JSON.parse(l);return Date.now()>m.expire?(localStorage.removeItem(`${x}-${t}`),null):m}catch(l){return console.error("Error reading cache for",t,l),null}}function lt(t){try{const l=localStorage.getItem(`${x}-${t}`);if(!l)return null;const m=JSON.parse(l);return Date.now()>m.expire?(localStorage.removeItem(`${x}-${t}`),null):{code:m.code,cta:m.cta,headline:m.headline,description:m.description,merchantName:m.merchantName}}catch(l){return console.error("Error reading cache for",t,l),null}}function kr(t,l){try{const m=it(t),I={...l,expire:Date.now()+F,hidden:m?.hidden||!1};localStorage.setItem(`${x}-${t}`,JSON.stringify(I))}catch(m){console.error("Error caching data for",t,m)}}function Nr(){try{Object.keys(localStorage).forEach(l=>{l.startsWith(x)&&localStorage.removeItem(l)}),console.log("Voucher cache cleared")}catch(t){console.error("Error clearing cache:",t)}}async function Er(t){const l=lt(t);if(l)return console.log(`Using cached data for article ${t}`),l;try{const m=`https://www.philstar.com/coupons/api/offers/16/en/${t}`,z=await fetch("https://corsproxy.io/?"+encodeURIComponent(m));if(!z.ok)return console.error(`API request failed for ${t}: ${z.status}`),null;const $=await z.json();console.log("data",$);const k={code:null,cta:`${$.cta.heading} ${$.cta.value}`.trim(),headline:$.headline||$.title||"No headline available",description:$.description||$.content||"No description available",merchantName:$.merchant?.name||"Unknown merchant"};if($&&$.code){const A=$.code.replace(/[^A-Za-z0-9]/g,"");g(A)||(k.code=A)}return kr(t,k),console.log(`Cached data for article ${t}`),k}catch(m){return console.error(`Error fetching voucher code for ${t}:`,m),null}}async function Ce(){try{d(V,!0),d(b,null);const t=["https://www.philstar.com/coupons/grabfood","https://www.philstar.com/coupons/foodpanda"],l="https://corsproxy.io/?",m=[],I=[];for(const C of t){console.log(`Fetching from: ${C}`);const k=await fetch(l+encodeURIComponent(C));if(!k.ok){console.error(`HTTP error for ${C}! status: ${k.status}`);continue}const A=await k.text();new DOMParser().parseFromString(A,"text/html").querySelectorAll('article[data-type="code"]').forEach(D=>{const H=(D.getAttribute("id")||"").replace(/[^A-Za-z0-9]/g,""),ee=D.getAttribute("data-type")||"";if(H&&ee==="code"){const re=D.querySelector('h3, .title, [class*="title"]')?.textContent?.trim()||"No title found",te=D.querySelector('p, .description, [class*="description"]')?.textContent?.trim()||"No description found",Ke=D.querySelector('.cta, .call-to-action, [class*="cta"], button, .btn, [class*="button"]')?.textContent?.trim()||"View Offer";m.push({id:H,dataType:ee,title:re,content:te,cta:Ke}),I.push(H)}})}d(c,m),N=I,console.log('Found article IDs with data-type="code":',I),ne=[],d(c,[...m]),console.log("Fetching coupon codes...");let z=0,$=0;for(let C=0;C<m.length;C++){const k=m[C],A=lt(k.id);if(A)console.log(`Using cached data for article ${C+1}/${m.length}: ${k.id}`),z++,A.code&&(J(c,e(c)[C].couponCode=A.code),J(c,e(c)[C].cta=A.cta),J(c,e(c)[C].headline=A.headline),J(c,e(c)[C].description=A.description),J(c,e(c)[C].merchantName=A.merchantName),d(c,[...e(c)]));else{console.log(`Fetching from API for article ${C+1}/${m.length}: ${k.id}`),$++;const P=await Er(k.id);P&&P.code&&(J(c,e(c)[C].couponCode=P.code),J(c,e(c)[C].cta=P.cta),J(c,e(c)[C].headline=P.headline),J(c,e(c)[C].description=P.description),J(c,e(c)[C].merchantName=P.merchantName),d(c,[...e(c)])),await new Promise(s=>setTimeout(s,500))}}console.log(`Cache performance - Hits: ${z}, API calls: ${$}`),console.log("Progressive loading completed")}catch(t){d(b,t instanceof Error?t.message:"An unknown error occurred"),console.error("Error fetching GrabFood vouchers:",t)}finally{d(V,!1)}}Oo(()=>{Ce(),sr(),nr(),wr()});function Sr(t){navigator.clipboard.writeText(t).then(()=>{_&&clearTimeout(_),d(K,t),_=setTimeout(()=>{d(K,null),_=null},2e3)})}async function Ar(){Nr(),Cr(),await Ce()}_e(()=>(e(c),e(j)),()=>{d(a,e(c).filter(t=>!ar.includes(t.couponCode||"")&&!e(j).includes(t.id||"")))}),_e(()=>(e(w),e(y),e(a)),()=>{d(u,[...e(w).filter(t=>t.merchantName?.toLowerCase().includes("grabfood")||t.merchantName?.toLowerCase().includes("grab")?!e(y).grabfood:t.merchantName?.toLowerCase().includes("foodpanda")?!e(y).foodpanda:!0).map(t=>({...t,isCustom:!0,voucherCode:t.code,cta:t.cta,description:t.description})),...e(a).filter(t=>t.merchantName?.toLowerCase().includes("grabfood")||t.merchantName?.toLowerCase().includes("grab")?!e(y).grabfood:t.merchantName?.toLowerCase().includes("foodpanda")?!e(y).foodpanda:!0).map(t=>({...t,isCustom:!1,voucherCode:t.couponCode}))])}),_e(()=>e(w),()=>{d(v,e(w).filter(t=>t.code&&t.code.trim()!==""&&t.code!=="No code found").length)}),_e(()=>e(a),()=>{d(f,e(a).filter(t=>t.couponCode&&t.couponCode.trim()!==""&&t.couponCode!=="No code found"&&(t.merchantName?.toLowerCase().includes("grabfood")||t.merchantName?.toLowerCase().includes("grab"))).length)}),_e(()=>e(a),()=>{d(p,e(a).filter(t=>t.couponCode&&t.couponCode.trim()!==""&&t.couponCode!=="No code found"&&t.merchantName?.toLowerCase().includes("foodpanda")).length)}),Mo(),Bo();var ct=ka(),ke=tt(ct),$e=i(ke),dt=i($e),ut=i(dt),Fe=i(ut),Vr=i(Fe);{var Mr=t=>{var l=va(),m=i(l);{var I=s=>{var M=aa(),D=i(M);n(M),oe(()=>X(D,`${e(v)??""} Custom`)),S(s,M)};R(m,s=>{e(v)>0&&s(I)})}var z=h(m,2);{var $=s=>{var M=ia(),D=i(M),ve=i(D);n(D);var H=h(D,2),ee=i(H);{var ie=O=>{var te=sa();S(O,te)},re=O=>{var te=na();S(O,te)};R(ee,O=>{e(y),T(()=>e(y).grabfood)?O(ie):O(re,!1)})}n(H),n(M),oe(()=>{X(ve,`${e(f)??""} GrabFood`),Me(H,"title",(e(y),T(()=>e(y).grabfood?"Show GrabFood vouchers":"Hide GrabFood vouchers")))}),L("click",H,()=>nt("grabfood")),S(s,M)};R(z,s=>{e(f)>0&&s($)})}var C=h(z,2);{var k=s=>{var M=da(),D=i(M),ve=i(D);n(D);var H=h(D,2),ee=i(H);{var ie=O=>{var te=la();S(O,te)},re=O=>{var te=ca();S(O,te)};R(ee,O=>{e(y),T(()=>e(y).foodpanda)?O(ie):O(re,!1)})}n(H),n(M),oe(()=>{X(ve,`${e(p)??""} FoodPanda`),Me(H,"title",(e(y),T(()=>e(y).foodpanda?"Show FoodPanda vouchers":"Hide FoodPanda vouchers")))}),L("click",H,()=>nt("foodpanda")),S(s,M)};R(C,s=>{e(p)>0&&s(k)})}var A=h(C,2);{var P=s=>{var M=ua(),D=i(M);n(M),oe(()=>X(D,`${e(j),T(()=>e(j).length)??""} Hidden`)),S(s,M)};R(A,s=>{e(j),T(()=>e(j).length>0)&&s(P)})}n(l),S(t,l)};R(Vr,t=>{e(v),e(f),e(p),e(j),T(()=>e(v)>0||e(f)>0||e(p)>0||e(j).length>0)&&t(Mr)})}n(Fe);var vt=h(Fe,2),ft=i(vt),ht=h(ft,2),pe=i(ht),Dr=i(pe);{var Lr=t=>{var l=fa();S(t,l)},Tr=t=>{var l=To("Refresh");S(t,l)};R(Dr,t=>{e(V)?t(Lr):t(Tr,!1)})}n(pe);var mt=h(pe,2);n(ht),n(vt),n(ut),n(dt),n($e);var pt=h($e,2),gt=i(pt),bt=i(gt);{var $r=t=>{var l=ha(),m=h(i(l),2),I=i(m);n(m),n(l),oe(()=>X(I,`Copied "${e(K)??""}"!`)),S(t,l)};R(bt,t=>{e(K)&&t($r)})}var xt=h(bt,2);{var Fr=t=>{var l=ma(),m=h(i(l),2),I=i(m,!0);n(m);var z=h(m,2);n(l),oe(()=>X(I,e(b))),L("click",z,Ce),S(t,l)};R(xt,t=>{e(b)&&t(Fr)})}var Ir=h(xt,2);{var Hr=t=>{var l=Ca(),m=tt(l);{var I=k=>{var A=_a();zo(A,5,()=>e(u),Go,(P,s)=>{var M=$o(),D=tt(M);{var ve=H=>{var ee=xa(),ie=i(ee),re=i(ie),O=i(re),te=i(O,!0);n(O),Fo(2),n(re),n(ie);var Rt=h(ie,2);{var Ke=ge=>{var be=ba(),Xe=i(be),Qe=i(Xe),Jr=i(Qe,!0);n(Qe);var Ut=h(Qe,2),qt=i(Ut),Bt=i(qt),Yr=i(Bt,!0);n(Bt),n(qt),n(Ut),n(Xe);var Kr=h(Xe,2);{var Xr=fe=>{var ue=pa(),Ae=i(ue),Wr=h(Ae,2);n(ue),L("click",Ae,()=>_r({id:e(s).id,code:e(s).voucherCode||"",description:e(s).description||"",cta:e(s).cta||""})),L("click",Wr,()=>ur({id:e(s).id,code:e(s).voucherCode||"",description:e(s).description||"",cta:e(s).cta||""})),S(fe,ue)},Qr=fe=>{var ue=ga(),Ae=i(ue);n(ue),L("click",Ae,()=>hr({id:e(s).id,voucherCode:e(s).voucherCode||""})),S(fe,ue)};R(Kr,fe=>{e(s),T(()=>e(s).isCustom)?fe(Xr):fe(Qr,!1)})}n(be),oe(()=>{X(Jr,(e(s),T(()=>e(s).cta||"View Details"))),X(Yr,(e(s),T(()=>e(s).description||"No description available")))}),S(ge,be)};R(Rt,ge=>{e(s),T(()=>e(s).cta||!e(s).isCustom&&e(s).headline||e(s).description)&&ge(Ke)})}n(ee),oe((ge,be)=>{Jt(ee,1,`p-3 sm:p-4 rounded-lg border shadow-lg ${ge??""}`),Jt(re,1,`w-full text-base sm:text-lg font-bold font-mono bg-white/95 px-3 py-2 rounded border border-white/60 break-all flex items-center justify-between hover:bg-white transition-all cursor-pointer shadow-sm ${be??""}`),X(te,(e(s),T(()=>e(s).voucherCode)))},[()=>(e(s),T(()=>"merchantName"in e(s)&&e(s).merchantName?.toLowerCase().includes("grabfood")||"merchantName"in e(s)&&e(s).merchantName?.toLowerCase().includes("grab")?"bg-green-100/95 border-green-300/100":"merchantName"in e(s)&&e(s).merchantName?.toLowerCase().includes("foodpanda")?"bg-pink-100/95 border-pink-300/100":"bg-gray-200/95 border-gray-400/100")),()=>(e(s),T(()=>"merchantName"in e(s)&&e(s).merchantName?.toLowerCase().includes("grabfood")||"merchantName"in e(s)&&e(s).merchantName?.toLowerCase().includes("grab")?"text-green-700":"merchantName"in e(s)&&e(s).merchantName?.toLowerCase().includes("foodpanda")?"text-pink-700":"text-gray-700"))],Xt),L("click",re,()=>Sr(e(s).voucherCode||"")),S(H,ee)};R(D,H=>{e(s),T(()=>e(s).voucherCode)&&H(ve)})}S(P,M)}),n(A),S(k,A)},z=(k,A)=>{{var P=s=>{var M=wa();S(s,M)};R(k,s=>{e(V)||s(P)},A)}};R(m,k=>{e(u),T(()=>e(u).length>0)?k(I):k(z,!1)})}var $=h(m,2);{var C=k=>{var A=ya();S(k,A)};R($,k=>{e(V)&&k(C)})}S(t,l)};R(Ir,t=>{e(b)||t(Hr)})}n(gt),n(pt),n(ke);var Ne=h(ke,2),_t=i(Ne),Ie=i(_t),He=i(Ie),Or=i(He);n(He);var Rr=h(He,2);n(Ie);var Oe=h(Ie,4),Re=i(Oe),wt=h(i(Re),2);Yt(wt),n(Re);var Ue=h(Re,2),qe=h(i(Ue),2);oe(()=>{e(Z),Lo(()=>{})});var Be=i(qe);Be.value=Be.__value="GrabFood";var yt=h(Be);yt.value=yt.__value="Foodpanda",n(qe),n(Ue);var Ge=h(Ue,2),Ct=h(i(Ge),2);Yt(Ct),n(Ge);var je=h(Ge,2),kt=h(i(je),2);Ro(kt),n(je);var Nt=h(je,2),ze=i(Nt),Ur=i(ze);n(ze);var qr=h(ze,2);n(Nt),n(Oe),n(_t),n(Ne),Ve(Ne,t=>d(W,t),()=>e(W));var Ee=h(Ne,2),Et=i(Ee),Pe=i(Et),St=h(i(Pe),2),At=h(i(St),2),Br=i(At);n(At),n(St),n(Pe);var Vt=h(Pe,2),Mt=i(Vt),Gr=h(Mt,2);n(Vt),n(Et),n(Ee),Ve(Ee,t=>d(ce,t),()=>e(ce));var Se=h(Ee,2),Dt=i(Se),Je=i(Dt),Lt=h(i(Je),2),Tt=h(i(Lt),2),jr=i(Tt);n(Tt),n(Lt),n(Je);var $t=h(Je,2),Ft=i($t),zr=h(Ft,2);n($t),n(Dt),n(Se),Ve(Se,t=>d(he,t),()=>e(he));var Ye=h(Se,2),It=i(Ye),Ht=h(i(It),2),Ot=i(Ht),Pr=h(Ot,2);n(Ht),n(It),n(Ye),Ve(Ye,t=>d(me,t),()=>e(me)),oe(()=>{Xo(ke,`background-image: url('${qo??""}/background.png');`),pe.disabled=e(V),mt.disabled=e(V),X(Or,`${e(Q)?"Edit":"Add"} Custom Voucher`),X(Ur,`${e(Q)?"Update":"Add"} Voucher`),X(Br,`Are you sure you want to delete "${e(se),T(()=>e(se)?.code)??""}"? This action
          cannot be undone.`),X(jr,`Are you sure you want to hide "${e(de),T(()=>e(de)?.voucherCode)??""}"? Hidden
          vouchers will reappear when you force refresh the page.`)}),L("click",ft,()=>{Te(),e(W).showModal()}),L("click",pe,Ce),L("click",mt,gr),L("click",Rr,()=>e(W).close()),rt(wt,()=>e(B),t=>d(B,t)),Wo(qe,()=>e(Z),t=>d(Z,t)),rt(Ct,()=>e(ae),t=>d(ae,t)),rt(kt,()=>e(G),t=>d(G,t)),L("click",qr,()=>e(W).close()),L("submit",Oe,oa(function(...t){(e(Q)?cr:lr)?.apply(this,t)})),L("click",Mt,fr),L("click",Gr,vr),L("click",Ft,pr),L("click",zr,mr),L("click",Ot,xr),L("click",Pr,br),S(r,ct),Do()}var Ea=U('<meta name="description" content="Get the latest vouchers. Save money on your food delivery orders with verified promo codes from restaurants across the Philippines."/>');function $a(r){Uo(o=>{var a=Ea();Io.title="Voucher Codes",S(o,a)}),Na(r,{})}export{$a as component};
