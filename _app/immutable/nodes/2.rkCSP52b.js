import"../chunks/NZTpNUN0.js";import"../chunks/DbsUdBPn.js";import{s as it,j as K,K as ho,V as mo,k as po,i as go,g as e,aj as ht,l as bo,m as xo,n as tr,o as lt,v as ke,X as _o,$ as wo,p as cr,q as dr,t as yo,a2 as ur,T as vr,at as C,ay as rr,az as ct,O as or,aA as Co,aB as ko,aC as No,L as Eo,aD as Ao,aE as So,aF as Vo,aG as Do,Y as Mo,w as To,Q as Lo,aH as $o,aI as Ho,aJ as Io,aK as Fo,aL as Oo,aM as Ro,aN as Uo,aO as qo,b as T,x as jo,z as zo,aP as Ne,aQ as Bo,A as H,B as dt,C as ee,G as i,J as f,D as k,F as Go,al as l,I as s,aR as Po,aS as J,aT as Se,ax as Jo,av as Yo,aU as Ko,aV as Xo}from"../chunks/DP-8aDPg.js";import{l as fr,a as Qo,o as Wo,e as S,r as Zo,s as Y,b as ea}from"../chunks/gXT8tc34.js";import{b as ta}from"../chunks/C7j7fvMl.js";import{i as $,b as Re}from"../chunks/DS3IH4eQ.js";import{i as ra}from"../chunks/DL6TPcER.js";function oa(r,o){return o}function aa(r,o,a,u){for(var v=[],h=o.length,p=0;p<h;p++)No(o[p].e,v,!0);var x=h>0&&v.length===0&&a!==null;if(x){var F=a.parentNode;Eo(F),F.append(a),u.clear(),de(r,o[0].prev,o[h-1].next)}Ao(v,()=>{for(var q=0;q<h;q++){var g=o[q];x||(u.delete(g.k),de(r,g.prev,g.next)),So(g.e,!x)}})}function sa(r,o,a,u,v,h=null){var p=r,x={flags:o,items:new Map,first:null};{var F=r;p=K?it(ho(F)):F.appendChild(mo())}K&&po();var q=null,g=!1,D=ht(()=>{var b=a();return vr(b)?b:b==null?[]:ur(b)});go(()=>{var b=e(D),d=b.length;if(g&&d===0)return;g=d===0;let A=!1;if(K){var le=bo(p)===xo;le!==(d===0)&&(p=tr(),it(p),lt(!1),A=!0)}if(K){for(var X=null,_,w=0;w<d;w++){if(ke.nodeType===_o&&ke.data===wo){p=ke,A=!0,lt(!1);break}var Q=b[w],j=u(Q,w);_=hr(ke,x,X,null,Q,j,w,v,o,a),x.items.set(j,_),X=_}d>0&&it(tr())}K||na(b,x,p,v,o,u,a),h!==null&&(d===0?q?cr(q):q=dr(()=>h(p)):q!==null&&yo(q,()=>{q=null})),A&&lt(!0),e(D)}),K&&(p=ke)}function na(r,o,a,u,v,h,p){var x=r.length,F=o.items,q=o.first,g=q,D,b=null,d=[],A=[],le,X,_,w;for(w=0;w<x;w+=1){if(le=r[w],X=h(le,w),_=F.get(X),_===void 0){var Q=g?g.e.nodes_start:a;b=hr(Q,o,b,b===null?o.first:b.next,le,X,w,u,v,p),F.set(X,b),d=[],A=[],g=b.next;continue}if(ia(_,le,w),(_.e.f&ct)!==0&&cr(_.e),_!==g){if(D!==void 0&&D.has(_)){if(d.length<A.length){var j=A[0],z;b=j.prev;var se=d[0],te=d[d.length-1];for(z=0;z<d.length;z+=1)ar(d[z],j,a);for(z=0;z<A.length;z+=1)D.delete(A[z]);de(o,se.prev,te.next),de(o,b,se),de(o,te,j),g=j,b=te,w-=1,d=[],A=[]}else D.delete(_),ar(_,g,a),de(o,_.prev,_.next),de(o,_,b===null?o.first:b.next),de(o,b,_),b=_;continue}for(d=[],A=[];g!==null&&g.k!==X;)(g.e.f&ct)===0&&(D??=new Set).add(g),A.push(g),g=g.next;if(g===null)continue;_=g}d.push(_),b=_,g=_.next}if(g!==null||D!==void 0){for(var W=D===void 0?[]:ur(D);g!==null;)(g.e.f&ct)===0&&W.push(g),g=g.next;var ue=W.length;if(ue>0){var ne=x===0?a:null;aa(o,W,ne,F)}}or.first=o.first&&o.first.e,or.last=b&&b.e}function ia(r,o,a,u){ko(r.v,o),r.i=a}function hr(r,o,a,u,v,h,p,x,F,q){var g=(F&Vo)!==0,D=(F&Do)===0,b=g?D?C(v,!1,!1):rr(v):v,d=(F&Co)===0?p:rr(p),A={i:d,v:b,k:h,a:null,e:null,prev:a,next:u};try{return A.e=dr(()=>x(r,b,d,q),K),A.e.prev=a&&a.e,A.e.next=u&&u.e,a===null?o.first=A:(a.next=A,a.e.next=A.e),u!==null&&(u.prev=A,u.e.prev=A.e),A}finally{}}function ar(r,o,a){for(var u=r.next?r.next.e.nodes_start:a,v=o?o.e.nodes_start:a,h=r.e.nodes_start;h!==u;){var p=Mo(h);v.before(h),h=p}}function de(r,o,a){o===null?r.first=a:(o.next=a,o.e.next=a&&a.e),a!==null&&(a.prev=o,a.e.prev=o&&o.e)}function la(r,o,a){var u=r==null?"":""+r;return u===""?null:u}function ca(r,o){return r==null?null:String(r)}function sr(r,o,a,u,v,h){var p=r.__className;if(K||p!==a||p===void 0){var x=la(a);(!K||x!==r.getAttribute("class"))&&(x==null?r.removeAttribute("class"):r.className=x),r.__className=a}return h}function nr(r,o,a,u){var v=r.__style;if(K||v!==o){var h=ca(o);(!K||h!==r.getAttribute("style"))&&(h==null?r.removeAttribute("style"):r.style.cssText=h),r.__style=o}return u}function mr(r,o,a=!1){if(r.multiple){if(o==null)return;if(!vr(o))return $o();for(var u of r.options)u.selected=o.includes(Ee(u));return}for(u of r.options){var v=Ee(u);if(Ho(v,o)){u.selected=!0;return}}(!a||o!==void 0)&&(r.selectedIndex=-1)}function da(r){var o=new MutationObserver(()=>{mr(r,r.__value)});o.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Lo(()=>{o.disconnect()})}function ua(r,o,a=o){var u=!0;fr(r,"change",v=>{var h=v?"[selected]":":checked",p;if(r.multiple)p=[].map.call(r.querySelectorAll(h),Ee);else{var x=r.querySelector(h)??r.querySelector("option:not([disabled])");p=x&&Ee(x)}a(p)}),To(()=>{var v=o();if(mr(r,v,u),u&&v===void 0){var h=r.querySelector(":checked");h!==null&&(v=Ee(h),a(v))}r.__value=v,u=!1}),da(r)}function Ee(r){return"__value"in r?r.__value:r.value}const va=Symbol("is custom element"),fa=Symbol("is html");function ir(r){if(K){var o=!1,a=()=>{if(!o){if(o=!0,r.hasAttribute("value")){var u=r.value;Ae(r,"value",null),r.value=u}if(r.hasAttribute("checked")){var v=r.checked;Ae(r,"checked",null),r.checked=v}}};r.__on_r=a,Io(a),Qo()}}function Ae(r,o,a,u){var v=ha(r);K&&(v[o]=r.getAttribute(o),o==="src"||o==="srcset"||o==="href"&&r.nodeName==="LINK")||v[o]!==(v[o]=a)&&(o==="loading"&&(r[Ro]=a),a==null?r.removeAttribute(o):typeof a!="string"&&ma(r).includes(o)?r[o]=a:r.setAttribute(o,a))}function ha(r){return r.__attributes??={[va]:r.nodeName.includes("-"),[fa]:r.namespaceURI===Fo}}var lr=new Map;function ma(r){var o=lr.get(r.nodeName);if(o)return o;lr.set(r.nodeName,o=[]);for(var a,u=r,v=Element.prototype;v!==u;){a=Uo(u);for(var h in a)a[h].set&&o.push(h);u=Oo(u)}return o}function ut(r,o,a=o){var u=qo();fr(r,"input",v=>{var h=v?r.defaultValue:r.value;if(h=vt(r)?ft(h):h,a(h),u&&h!==(h=o())){var p=r.selectionStart,x=r.selectionEnd;r.value=h??"",x!==null&&(r.selectionStart=p,r.selectionEnd=Math.min(x,r.value.length))}}),(K&&r.defaultValue!==r.value||T(o)==null&&r.value)&&a(vt(r)?ft(r.value):r.value),jo(()=>{var v=o();vt(r)&&v===ft(r.value)||r.type==="date"&&!v&&!r.value||v!==r.value&&(r.value=v??"")})}function vt(r){var o=r.type;return o==="number"||o==="range"}function ft(r){return r===""?null:+r}function pa(r){return function(...o){var a=o[0];return a.preventDefault(),r?.apply(this,o)}}var ga=H('<div class="text-gray-700"> </div>'),ba=Se('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"></path></svg>'),xa=Se('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>'),_a=H('<div class="text-green-700 font-semibold flex items-center"><span> </span> <button class="p-1 hover:bg-gray-100 rounded transition-colors"><!></button></div>'),wa=Se('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"></path></svg>'),ya=Se('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>'),Ca=H('<div class="text-pink-700 font-semibold flex items-center"><span> </span> <button class="p-1 hover:bg-gray-100 rounded transition-colors"><!></button></div>'),ka=H('<div class="text-gray-500"> </div>'),Na=H('<div class="text-sm sm:text-base font-medium space-y-1"><!> <!> <!> <!></div>'),Ea=H('<div class="absolute inset-0 bg-gradient-to-r from-orange-600 to-red-600 transition-all duration-75 ease-linear"></div>'),Aa=Se('<svg class="animate-spin h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),Sa=H('<div class="text-xs text-gray-500 mt-1 text-center">Hold to Hard Refresh</div>'),Va=H('<div class="fixed top-20 right-4 bg-green-600 text-white px-4 py-3 rounded-lg shadow-lg z-20 flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> <span class="text-sm font-medium"> </span></div>'),Da=H('<div class="bg-red-50 border border-red-200 rounded-lg p-4 sm:p-6 mb-6 sm:mb-8 mx-2 sm:mx-0"><h3 class="text-red-800 font-semibold mb-2 text-sm sm:text-base">Error Loading Data</h3> <p class="text-red-600 mb-4 text-sm"> </p> <button class="w-full sm:w-auto px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors text-sm">Try Again</button></div>'),Ma=H('<div class="absolute top-0 right-0 flex gap-2"><button class="px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors text-sm shadow-sm" title="Edit voucher">Edit</button> <button class="px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 transition-colors text-sm shadow-sm" title="Delete voucher">Delete</button></div>'),Ta=H('<div class="absolute top-0 right-0 flex gap-2"><button class="px-3 py-1 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors text-sm shadow-sm" title="Hide voucher">Hide</button></div>'),La=H('<div class="mt-3 relative"><details class="w-full"><summary class="cursor-pointer text-sm font-semibold text-gray-700 hover:text-gray-900 py-1"> </summary> <div class="mt-3 p-3 bg-white/95 rounded border border-white/60 text-sm space-y-2 shadow-sm"><div><p class="text-gray-600 mt-1 leading-relaxed"> </p></div></div></details> <!></div>'),$a=H('<div><div class="mb-3"><button title="Click to copy voucher code" aria-label="Copy voucher code"><span class="flex-1 text-left"> </span> <div class="flex items-center gap-2 ml-2 flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg></div></button></div> <!></div>'),Ha=H('<div class="space-y-3 sm:space-y-4 mb-6 sm:mb-8"></div>'),Ia=H('<div class="text-center py-8 bg-gray-50 rounded-lg border border-gray-200"><p class="text-gray-500 mb-2">No vouchers available</p> <p class="text-sm text-gray-400">Add a custom voucher or refresh to fetch GrabFood vouchers</p></div>'),Fa=H('<div class="text-center py-8"><div class="inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"></div> <p class="text-gray-600 mt-2 text-sm">Fetching more vouchers...</p></div>'),Oa=H("<!> <!>",1),Ra=H(`<div class="h-screen flex flex-col bg-cover bg-center bg-no-repeat"><div class="sticky top-0 z-10 bg-white border-b border-gray-200 shadow-sm"><div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4"><div class="flex flex-row items-start justify-between gap-4"><div class="flex-1"><!></div> <div class="flex flex-col gap-2 items-end flex-shrink-0"><button class="px-4 sm:px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium text-xs sm:text-sm whitespace-nowrap">Add Custom Voucher</button> <div class="flex flex-col items-end"><button class="relative overflow-hidden px-4 sm:px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium text-xs sm:text-sm whitespace-nowrap"><!> <div class="relative z-10 flex items-center justify-center"><!></div></button> <!></div></div></div></div></div> <div class="flex-1 overflow-y-auto"><div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-8"><!> <!> <!></div></div></div> <dialog class="p-0 rounded-lg shadow-xl max-w-md svelte-1w11x2y" style="margin: 1rem auto; width: calc(100% - 2rem);"><div class="p-6"><div class="flex justify-between items-center mb-4"><h3 class="text-lg font-semibold text-purple-800"> </h3> <button class="text-gray-400 hover:text-gray-600 transition-colors" aria-label="Close modal"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="mb-4 p-2 bg-blue-50 border border-blue-200 rounded-lg"><div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-blue-600 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <p class="text-xs text-blue-700">Only you can see this addition.</p></div></div> <form class="space-y-4"><div><label for="modal-voucher-code" class="block text-sm font-medium text-gray-700 mb-1">Voucher Code *</label> <input id="modal-voucher-code" type="text" placeholder="Enter voucher code" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"/></div> <div><label for="modal-voucher-merchant" class="block text-sm font-medium text-gray-700 mb-1">Merchant *</label> <select id="modal-voucher-merchant" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"><option>GrabFood</option><option>Foodpanda</option></select></div> <div><label for="modal-voucher-cta" class="block text-sm font-medium text-gray-700 mb-1">Title *</label> <input id="modal-voucher-cta" type="text" placeholder="e.g., 'Save 20% on your order'" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"/></div> <div><label for="modal-voucher-description" class="block text-sm font-medium text-gray-700 mb-1">Description</label> <textarea id="modal-voucher-description" placeholder="Enter description (optional)" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea></div> <div class="flex gap-2 pt-4"><button type="submit" class="flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium text-sm"> </button> <button type="button" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium text-sm">Cancel</button></div></form></div></dialog> <dialog class="p-0 rounded-lg shadow-xl max-w-sm svelte-1w11x2y" style="margin: 1rem auto; width: calc(100% - 2rem);"><div class="p-6"><div class="flex items-center gap-3 mb-4"><div class="flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.502 0L4.312 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div> <div class="flex-1"><h3 class="text-lg font-semibold text-gray-900">Delete Voucher</h3> <p class="text-sm text-gray-600 mt-1"> </p></div></div> <div class="flex gap-3 justify-end"><button type="button" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium text-sm">Cancel</button> <button type="button" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium text-sm">Delete</button></div></div></dialog> <dialog class="p-0 rounded-lg shadow-xl max-w-sm svelte-1w11x2y" style="margin: 1rem auto; width: calc(100% - 2rem);"><div class="p-6"><div class="flex items-center gap-3 mb-4"><div class="flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-yellow-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L12 12"></path></svg></div> <div class="flex-1"><h3 class="text-lg font-semibold text-gray-900">Hide Voucher</h3> <p class="text-sm text-gray-600 mt-1"> </p></div></div> <div class="flex gap-3 justify-end"><button type="button" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium text-sm">Cancel</button> <button type="button" class="px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors font-medium text-sm">Hide</button></div></div></dialog> <dialog class="p-0 rounded-lg shadow-xl max-w-sm svelte-1w11x2y" style="margin: 1rem auto; width: calc(100% - 2rem);"><div class="p-6"><div class="flex items-center gap-3 mb-4"><div class="flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-orange-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.502 0L4.312 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div> <div class="flex-1"><h3 class="text-lg font-semibold text-gray-900">Force Refresh</h3> <p class="text-sm text-gray-600 mt-1">This will clear all cached data and fetch fresh vouchers. Any hidden
          vouchers will reappear. Continue?</p></div></div> <div class="flex gap-3 justify-end"><button type="button" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium text-sm">Cancel</button> <button type="button" class="px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-medium text-sm">Force Refresh</button></div></div></dialog>`,1);function Ua(r,o){zo(o,!1);const a=C(),u=C(),v=C(),h=C(),p=C(),x="grabfood-voucher-cache",F=2*30*24*60*60*1e3,q=["NoCodeRequired","NoCouponRequired"];function g(t){return q.includes(t)}let D=C(!0),b=C(null),d=C([]),A=[],le=[],X=C(null),_=null,w=C([]),Q=C(null),j=C(""),z=C(""),se=C(""),te=C("GrabFood"),W=C(),ue=C(),ne=C(null),be=C(),ve=C(null),xe=C(),B=C([]),y=C({});const Ue="voucher-category-visibility";let _e=C(!1),me=C(!1),ie=C(0),Ve=null,fe=null,De=null;const Me=3e3,Te=800,mt="grabfood-custom-vouchers",pr=["NoCodeRequired","NoCouponRequired"];function gr(){try{const t=localStorage.getItem(mt);t&&l(w,JSON.parse(t))}catch(t){console.error("Error loading custom vouchers:",t)}}function qe(){try{localStorage.setItem(mt,JSON.stringify(e(w)))}catch(t){console.error("Error saving custom vouchers:",t)}}function br(){try{l(B,[]);for(let t=0;t<localStorage.length;t++){const c=localStorage.key(t);if(c&&c.startsWith(x)){const m=localStorage.getItem(c);if(m&&JSON.parse(m).hidden){const G=c.replace(`${x}-`,"");e(B).push(G)}}}l(B,[...e(B)])}catch(t){console.error("Error loading hidden vouchers:",t)}}function xr(t){if(!e(B).includes(t)){let c=bt(t);c||(c={code:null,expire:Date.now()+F,hidden:!1});const m={...c,expire:Date.now()+F,hidden:!0};localStorage.setItem(`${x}-${t}`,JSON.stringify(m)),l(B,[...e(B),t])}}function _r(){if(!e(j).trim())return;const t={id:Date.now().toString(),code:e(j).trim(),description:e(z).trim()||"Custom voucher",cta:e(se).trim()||"Use this code",merchantName:e(te)};l(w,[t,...e(w)]),qe(),je(),e(W).close()}function wr(){!e(Q)||!e(j).trim()||(l(w,e(w).map(t=>t.id===e(Q).id?{...t,code:e(j).trim(),description:e(z).trim()||"Custom voucher",cta:e(se).trim()||"Use this code",merchantName:e(te)}:t)),qe(),je(),e(W).close())}function yr(t){l(w,e(w).filter(c=>c.id!==t)),qe()}function Cr(t){l(ne,t),e(ue).showModal()}function kr(){e(ne)&&(yr(e(ne).id),l(ne,null)),e(ue).close()}function Nr(){l(ne,null),e(ue).close()}function Er(t){l(ve,t),e(be).showModal()}function Ar(){e(ve)&&(xr(e(ve).id),l(ve,null)),e(be).close()}function Sr(){l(ve,null),e(be).close()}function pt(){e(D)||(l(_e,!0),l(me,!1),l(ie,0),De=setTimeout(()=>{e(_e)&&(l(me,!0),fe=setInterval(()=>{l(ie,e(ie)+100/((Me-Te)/50)),e(ie)>=100&&(l(ie,100),fe&&(clearInterval(fe),fe=null))},50))},Te),Ve=setTimeout(()=>{e(xe).showModal(),we()},Me))}function we(){l(_e,!1),l(me,!1),l(ie,0),Ve&&(clearTimeout(Ve),Ve=null),fe&&(clearInterval(fe),fe=null),De&&(clearTimeout(De),De=null)}function Vr(){e(xe).close(),Rr()}function Dr(){e(xe).close()}function Mr(t){l(Q,t),l(j,t.code),l(z,t.description),l(se,t.cta),l(te,t.merchantName||"GrabFood"),e(W).showModal()}function je(){l(Q,null),l(j,""),l(z,""),l(se,""),l(te,"GrabFood")}function Tr(){try{const t=localStorage.getItem(Ue);t&&l(y,JSON.parse(t))}catch(t){console.error("Error loading category visibility:",t),l(y,{})}}function Lr(){try{localStorage.setItem(Ue,JSON.stringify(e(y)))}catch(t){console.error("Error saving category visibility:",t)}}function gt(t){if(t==="grabfood"||t==="foodpanda")if(e(y)[t])J(y,e(y)[t]=!1);else{J(y,e(y)[t]=!0);const c=t==="grabfood"?"foodpanda":"grabfood";J(y,e(y)[c]=!1)}else J(y,e(y)[t]=!e(y)[t]);Lr()}function $r(){l(y,{}),localStorage.removeItem(Ue)}function bt(t){try{const c=localStorage.getItem(`${x}-${t}`);if(!c)return null;const m=JSON.parse(c);return Date.now()>m.expire?(localStorage.removeItem(`${x}-${t}`),null):m}catch(c){return console.error("Error reading cache for",t,c),null}}function xt(t){try{const c=localStorage.getItem(`${x}-${t}`);if(!c)return null;const m=JSON.parse(c);return Date.now()>m.expire?(localStorage.removeItem(`${x}-${t}`),null):{code:m.code,cta:m.cta,headline:m.headline,description:m.description,merchantName:m.merchantName}}catch(c){return console.error("Error reading cache for",t,c),null}}function Hr(t,c){try{const m=bt(t),O={...c,expire:Date.now()+F,hidden:m?.hidden||!1};localStorage.setItem(`${x}-${t}`,JSON.stringify(O))}catch(m){console.error("Error caching data for",t,m)}}function Ir(){try{Object.keys(localStorage).forEach(c=>{c.startsWith(x)&&localStorage.removeItem(c)}),console.log("Voucher cache cleared")}catch(t){console.error("Error clearing cache:",t)}}async function Fr(t){const c=xt(t);if(c)return console.log(`Using cached data for article ${t}`),c;try{const m=`https://www.philstar.com/coupons/api/offers/16/en/${t}`,G=await fetch("https://corsproxy.io/?"+encodeURIComponent(m));if(!G.ok)return console.error(`API request failed for ${t}: ${G.status}`),null;const I=await G.json();console.log("data",I);const E={code:null,cta:`${I.cta.heading} ${I.cta.value}`.trim(),headline:I.headline||I.title||"No headline available",description:I.description||I.content||"No description available",merchantName:I.merchant?.name||"Unknown merchant"};if(I&&I.code){const V=I.code.replace(/[^A-Za-z0-9]/g,"");g(V)||(E.code=V)}return Hr(t,E),console.log(`Cached data for article ${t}`),E}catch(m){return console.error(`Error fetching voucher code for ${t}:`,m),null}}async function Le(){try{l(D,!0),l(b,null);const t=["https://www.philstar.com/coupons/grabfood","https://www.philstar.com/coupons/foodpanda"],c="https://corsproxy.io/?",m=[],O=[];for(const N of t){console.log(`Fetching from: ${N}`);const E=await fetch(c+encodeURIComponent(N));if(!E.ok){console.error(`HTTP error for ${N}! status: ${E.status}`);continue}const V=await E.text();new DOMParser().parseFromString(V,"text/html").querySelectorAll('article[data-type="code"]').forEach(L=>{const R=(L.getAttribute("id")||"").replace(/[^A-Za-z0-9]/g,""),re=L.getAttribute("data-type")||"";if(R&&re==="code"){const ae=L.querySelector('h3, .title, [class*="title"]')?.textContent?.trim()||"No title found",oe=L.querySelector('p, .description, [class*="description"]')?.textContent?.trim()||"No description found",at=L.querySelector('.cta, .call-to-action, [class*="cta"], button, .btn, [class*="button"]')?.textContent?.trim()||"View Offer";m.push({id:R,dataType:re,title:ae,content:oe,cta:at}),O.push(R)}})}l(d,m),A=O,console.log('Found article IDs with data-type="code":',O),le=[],l(d,[...m]),console.log("Fetching coupon codes...");let G=0,I=0;for(let N=0;N<m.length;N++){const E=m[N],V=xt(E.id);if(V)console.log(`Using cached data for article ${N+1}/${m.length}: ${E.id}`),G++,V.code&&(J(d,e(d)[N].couponCode=V.code),J(d,e(d)[N].cta=V.cta),J(d,e(d)[N].headline=V.headline),J(d,e(d)[N].description=V.description),J(d,e(d)[N].merchantName=V.merchantName),l(d,[...e(d)]));else{console.log(`Fetching from API for article ${N+1}/${m.length}: ${E.id}`),I++;const P=await Fr(E.id);P&&P.code&&(J(d,e(d)[N].couponCode=P.code),J(d,e(d)[N].cta=P.cta),J(d,e(d)[N].headline=P.headline),J(d,e(d)[N].description=P.description),J(d,e(d)[N].merchantName=P.merchantName),l(d,[...e(d)])),await new Promise(n=>setTimeout(n,500))}}console.log(`Cache performance - Hits: ${G}, API calls: ${I}`),console.log("Progressive loading completed")}catch(t){l(b,t instanceof Error?t.message:"An unknown error occurred"),console.error("Error fetching GrabFood vouchers:",t)}finally{l(D,!1)}}Wo(()=>{Le(),gr(),br(),Tr()});function Or(t){navigator.clipboard.writeText(t).then(()=>{_&&clearTimeout(_),l(X,t),_=setTimeout(()=>{l(X,null),_=null},2e3)})}async function Rr(){Ir(),$r(),await Le()}Ne(()=>(e(d),e(B)),()=>{l(a,e(d).filter(t=>!pr.includes(t.couponCode||"")&&!e(B).includes(t.id||"")))}),Ne(()=>(e(w),e(y),e(a)),()=>{l(u,[...e(w).filter(t=>t.merchantName?.toLowerCase().includes("grabfood")||t.merchantName?.toLowerCase().includes("grab")?!e(y).grabfood:t.merchantName?.toLowerCase().includes("foodpanda")?!e(y).foodpanda:!0).map(t=>({...t,isCustom:!0,voucherCode:t.code,cta:t.cta,description:t.description})),...e(a).filter(t=>t.merchantName?.toLowerCase().includes("grabfood")||t.merchantName?.toLowerCase().includes("grab")?!e(y).grabfood:t.merchantName?.toLowerCase().includes("foodpanda")?!e(y).foodpanda:!0).map(t=>({...t,isCustom:!1,voucherCode:t.couponCode}))])}),Ne(()=>e(w),()=>{l(v,e(w).filter(t=>t.code&&t.code.trim()!==""&&t.code!=="No code found").length)}),Ne(()=>e(a),()=>{l(h,e(a).filter(t=>t.couponCode&&t.couponCode.trim()!==""&&t.couponCode!=="No code found"&&(t.merchantName?.toLowerCase().includes("grabfood")||t.merchantName?.toLowerCase().includes("grab"))).length)}),Ne(()=>e(a),()=>{l(p,e(a).filter(t=>t.couponCode&&t.couponCode.trim()!==""&&t.couponCode!=="No code found"&&t.merchantName?.toLowerCase().includes("foodpanda")).length)}),Bo(),ra();var _t=Ra(),$e=dt(_t),ze=i($e),wt=i(ze),yt=i(wt),Be=i(yt),Ur=i(Be);{var qr=t=>{var c=Na(),m=i(c);{var O=n=>{var M=ga(),L=i(M);s(M),ee(()=>Y(L,`${e(v)??""} Custom`)),k(n,M)};$(m,n=>{e(v)>0&&n(O)})}var G=f(m,2);{var I=n=>{var M=_a(),L=i(M),pe=i(L);s(L);var R=f(L,2),re=i(R);{var ce=U=>{var oe=ba();k(U,oe)},ae=U=>{var oe=xa();k(U,oe)};$(re,U=>{e(y),T(()=>e(y).grabfood)?U(ce):U(ae,!1)})}s(R),s(M),ee(()=>{Y(pe,`${e(h)??""} GrabFood`),Ae(R,"title",(e(y),T(()=>e(y).grabfood?"Show GrabFood vouchers":"Hide GrabFood vouchers")))}),S("click",R,()=>gt("grabfood")),k(n,M)};$(G,n=>{e(h)>0&&n(I)})}var N=f(G,2);{var E=n=>{var M=Ca(),L=i(M),pe=i(L);s(L);var R=f(L,2),re=i(R);{var ce=U=>{var oe=wa();k(U,oe)},ae=U=>{var oe=ya();k(U,oe)};$(re,U=>{e(y),T(()=>e(y).foodpanda)?U(ce):U(ae,!1)})}s(R),s(M),ee(()=>{Y(pe,`${e(p)??""} FoodPanda`),Ae(R,"title",(e(y),T(()=>e(y).foodpanda?"Show FoodPanda vouchers":"Hide FoodPanda vouchers")))}),S("click",R,()=>gt("foodpanda")),k(n,M)};$(N,n=>{e(p)>0&&n(E)})}var V=f(N,2);{var P=n=>{var M=ka(),L=i(M);s(M),ee(()=>Y(L,`${e(B),T(()=>e(B).length)??""} Hidden`)),k(n,M)};$(V,n=>{e(B),T(()=>e(B).length>0)&&n(P)})}s(c),k(t,c)};$(Ur,t=>{e(v),e(h),e(p),e(B),T(()=>e(v)>0||e(h)>0||e(p)>0||e(B).length>0)&&t(qr)})}s(Be);var Ct=f(Be,2),kt=i(Ct),Nt=f(kt,2),Z=i(Nt),Et=i(Z);{var jr=t=>{var c=Ea();ee(()=>nr(c,`width: ${e(ie)??""}%`)),k(t,c)};$(Et,t=>{e(me)&&t(jr)})}var At=f(Et,2),zr=i(At);{var Br=t=>{var c=Aa();k(t,c)},Gr=t=>{var c=Jo();ee(m=>Y(c,m),[()=>(e(me),e(ie),T(()=>e(me)?`Hard Refresh (${Math.ceil((Me-Te-e(ie)*(Me-Te)/100)/1e3)})`:"Refresh"))],ht),k(t,c)};$(zr,t=>{e(D)?t(Br):t(Gr,!1)})}s(At),s(Z);var Pr=f(Z,2);{var Jr=t=>{var c=Sa();k(t,c)};$(Pr,t=>{e(_e)&&t(Jr)})}s(Nt),s(Ct),s(yt),s(wt),s(ze);var St=f(ze,2),Vt=i(St),Dt=i(Vt);{var Yr=t=>{var c=Va(),m=f(i(c),2),O=i(m);s(m),s(c),ee(()=>Y(O,`Copied "${e(X)??""}"!`)),k(t,c)};$(Dt,t=>{e(X)&&t(Yr)})}var Mt=f(Dt,2);{var Kr=t=>{var c=Da(),m=f(i(c),2),O=i(m,!0);s(m);var G=f(m,2);s(c),ee(()=>Y(O,e(b))),S("click",G,Le),k(t,c)};$(Mt,t=>{e(b)&&t(Kr)})}var Xr=f(Mt,2);{var Qr=t=>{var c=Oa(),m=dt(c);{var O=E=>{var V=Ha();sa(V,5,()=>e(u),oa,(P,n)=>{var M=Yo(),L=dt(M);{var pe=R=>{var re=$a(),ce=i(re),ae=i(ce),U=i(ae),oe=i(U,!0);s(U),Ko(2),s(ae),s(ce);var Qt=f(ce,2);{var at=ye=>{var Ce=La(),st=i(Ce),nt=i(st),io=i(nt,!0);s(nt);var Wt=f(nt,2),Zt=i(Wt),er=i(Zt),lo=i(er,!0);s(er),s(Zt),s(Wt),s(st);var co=f(st,2);{var uo=ge=>{var he=Ma(),Oe=i(he),fo=f(Oe,2);s(he),S("click",Oe,()=>Mr({id:e(n).id,code:e(n).voucherCode||"",description:e(n).description||"",cta:e(n).cta||""})),S("click",fo,()=>Cr({id:e(n).id,code:e(n).voucherCode||"",description:e(n).description||"",cta:e(n).cta||""})),k(ge,he)},vo=ge=>{var he=Ta(),Oe=i(he);s(he),S("click",Oe,()=>Er({id:e(n).id,voucherCode:e(n).voucherCode||""})),k(ge,he)};$(co,ge=>{e(n),T(()=>e(n).isCustom)?ge(uo):ge(vo,!1)})}s(Ce),ee(()=>{Y(io,(e(n),T(()=>e(n).cta||"View Details"))),Y(lo,(e(n),T(()=>e(n).description||"No description available")))}),k(ye,Ce)};$(Qt,ye=>{e(n),T(()=>e(n).cta||!e(n).isCustom&&e(n).headline||e(n).description)&&ye(at)})}s(re),ee((ye,Ce)=>{sr(re,1,`p-3 sm:p-4 rounded-lg border shadow-lg ${ye??""}`),sr(ae,1,`w-full text-base sm:text-lg font-bold font-mono bg-white/95 px-3 py-2 rounded border border-white/60 break-all flex items-center justify-between hover:bg-white transition-all cursor-pointer shadow-sm ${Ce??""}`),Y(oe,(e(n),T(()=>e(n).voucherCode)))},[()=>(e(n),T(()=>"merchantName"in e(n)&&e(n).merchantName?.toLowerCase().includes("grabfood")||"merchantName"in e(n)&&e(n).merchantName?.toLowerCase().includes("grab")?"bg-green-100/95 border-green-300/100":"merchantName"in e(n)&&e(n).merchantName?.toLowerCase().includes("foodpanda")?"bg-pink-100/95 border-pink-300/100":"bg-gray-200/95 border-gray-400/100")),()=>(e(n),T(()=>"merchantName"in e(n)&&e(n).merchantName?.toLowerCase().includes("grabfood")||"merchantName"in e(n)&&e(n).merchantName?.toLowerCase().includes("grab")?"text-green-700":"merchantName"in e(n)&&e(n).merchantName?.toLowerCase().includes("foodpanda")?"text-pink-700":"text-gray-700"))],ht),S("click",ae,()=>Or(e(n).voucherCode||"")),k(R,re)};$(L,R=>{e(n),T(()=>e(n).voucherCode)&&R(pe)})}k(P,M)}),s(V),k(E,V)},G=(E,V)=>{{var P=n=>{var M=Ia();k(n,M)};$(E,n=>{e(D)||n(P)},V)}};$(m,E=>{e(u),T(()=>e(u).length>0)?E(O):E(G,!1)})}var I=f(m,2);{var N=E=>{var V=Fa();k(E,V)};$(I,E=>{e(D)&&E(N)})}k(t,c)};$(Xr,t=>{e(b)||t(Qr)})}s(Vt),s(St),s($e);var He=f($e,2),Tt=i(He),Ge=i(Tt),Pe=i(Ge),Wr=i(Pe);s(Pe);var Zr=f(Pe,2);s(Ge);var Je=f(Ge,4),Ye=i(Je),Lt=f(i(Ye),2);ir(Lt),s(Ye);var Ke=f(Ye,2),Xe=f(i(Ke),2);ee(()=>{e(te),Po(()=>{})});var Qe=i(Xe);Qe.value=Qe.__value="GrabFood";var $t=f(Qe);$t.value=$t.__value="Foodpanda",s(Xe),s(Ke);var We=f(Ke,2),Ht=f(i(We),2);ir(Ht),s(We);var Ze=f(We,2),It=f(i(Ze),2);Zo(It),s(Ze);var Ft=f(Ze,2),et=i(Ft),eo=i(et);s(et);var to=f(et,2);s(Ft),s(Je),s(Tt),s(He),Re(He,t=>l(W,t),()=>e(W));var Ie=f(He,2),Ot=i(Ie),tt=i(Ot),Rt=f(i(tt),2),Ut=f(i(Rt),2),ro=i(Ut);s(Ut),s(Rt),s(tt);var qt=f(tt,2),jt=i(qt),oo=f(jt,2);s(qt),s(Ot),s(Ie),Re(Ie,t=>l(ue,t),()=>e(ue));var Fe=f(Ie,2),zt=i(Fe),rt=i(zt),Bt=f(i(rt),2),Gt=f(i(Bt),2),ao=i(Gt);s(Gt),s(Bt),s(rt);var Pt=f(rt,2),Jt=i(Pt),so=f(Jt,2);s(Pt),s(zt),s(Fe),Re(Fe,t=>l(be,t),()=>e(be));var ot=f(Fe,2),Yt=i(ot),Kt=f(i(Yt),2),Xt=i(Kt),no=f(Xt,2);s(Kt),s(Yt),s(ot),Re(ot,t=>l(xe,t),()=>e(xe)),ee(()=>{nr($e,`background-image: url('${ta??""}/background.png');`),Z.disabled=e(D),Ae(Z,"title",e(_e)?"Hold for 3 seconds to force refresh":"Click to refresh or hold for 3 seconds to force refresh"),Y(Wr,`${e(Q)?"Edit":"Add"} Custom Voucher`),Y(eo,`${e(Q)?"Update":"Add"} Voucher`),Y(ro,`Are you sure you want to delete "${e(ne),T(()=>e(ne)?.code)??""}"? This action
          cannot be undone.`),Y(ao,`Are you sure you want to hide "${e(ve),T(()=>e(ve)?.voucherCode)??""}"? Hidden
          vouchers will reappear when you force refresh the page.`)}),S("click",kt,()=>{je(),e(W).showModal()}),S("click",Z,Le),S("mousedown",Z,pt),S("mouseup",Z,we),S("mouseleave",Z,we),S("touchstart",Z,pt),S("touchend",Z,we),S("touchcancel",Z,we),S("click",Zr,()=>e(W).close()),ut(Lt,()=>e(j),t=>l(j,t)),ua(Xe,()=>e(te),t=>l(te,t)),ut(Ht,()=>e(se),t=>l(se,t)),ut(It,()=>e(z),t=>l(z,t)),S("click",to,()=>e(W).close()),S("submit",Je,pa(function(...t){(e(Q)?wr:_r)?.apply(this,t)})),S("click",jt,Nr),S("click",oo,kr),S("click",Jt,Sr),S("click",so,Ar),S("click",Xt,Dr),S("click",no,Vr),k(r,_t),Go()}var qa=H('<meta name="description" content="Get the latest vouchers. Save money on your food delivery orders with verified promo codes from restaurants across the Philippines."/>');function Ka(r){ea(o=>{var a=qa();Xo.title="Voucher Codes",k(o,a)}),Ua(r,{})}export{Ka as component};
