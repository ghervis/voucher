import"../chunks/NZTpNUN0.js";import"../chunks/DMhVrKq0.js";import{s as je,j,K as zr,V as Br,k as Gr,i as jr,g as e,aj as zt,l as Pr,m as Jr,n as Lt,o as Pe,v as he,X as Yr,$ as Kr,p as Bt,q as Gt,t as Xr,a2 as jt,T as Wr,at as E,ay as Ft,az as Je,O as Ot,aA as Zr,aB as Qr,aC as eo,L as to,aD as ro,aE as oo,aF as ao,aG as so,Y as no,aH as io,aI as lo,aJ as co,aK as uo,b as O,x as vo,z as fo,aL as de,aM as mo,A as q,B as Ye,C as ie,D as S,F as ho,J as v,al as u,G as s,I as a,aN as Y,aO as po,ax as go,av as xo,aP as bo,aQ as _o}from"../chunks/DSWTta2y.js";import{a as wo,l as yo,o as Co,e as H,r as ko,s as z,b as Eo}from"../chunks/Ct5JfzoW.js";import"../chunks/BarW64ud.js";import{i as B,b as Ce}from"../chunks/D4zdTCqX.js";import{i as No}from"../chunks/Dg7jTjDI.js";function Do(r,o){return o}function Ao(r,o,l,p){for(var h=[],g=o.length,x=0;x<g;x++)eo(o[x].e,h,!0);var N=g>0&&h.length===0&&l!==null;if(N){var k=l.parentNode;to(k),k.append(l),p.clear(),Q(r,o[0].prev,o[g-1].next)}ro(h,()=>{for(var A=0;A<g;A++){var m=o[A];N||(p.delete(m.k),Q(r,m.prev,m.next)),oo(m.e,!N)}})}function Vo(r,o,l,p,h,g=null){var x=r,N={flags:o,items:new Map,first:null};{var k=r;x=j?je(zr(k)):k.appendChild(Br())}j&&Gr();var A=null,m=!1,R=zt(()=>{var f=l();return Wr(f)?f:f==null?[]:jt(f)});jr(()=>{var f=e(R),_=f.length;if(m&&_===0)return;m=_===0;let i=!1;if(j){var Z=Pr(x)===Jr;Z!==(_===0)&&(x=Lt(),je(x),Pe(!1),i=!0)}if(j){for(var P=null,b,D=0;D<_;D++){if(he.nodeType===Yr&&he.data===Kr){x=he,i=!0,Pe(!1);break}var $=f[D],I=p($,D);b=Pt(he,N,P,null,$,I,D,h,o,l),N.items.set(I,b),P=b}_>0&&je(Lt())}j||So(f,N,x,h,o,p,l),g!==null&&(_===0?A?Bt(A):A=Gt(()=>g(x)):A!==null&&Xr(A,()=>{A=null})),i&&Pe(!0),e(R)}),j&&(x=he)}function So(r,o,l,p,h,g,x){var N=r.length,k=o.items,A=o.first,m=A,R,f=null,_=[],i=[],Z,P,b,D;for(D=0;D<N;D+=1){if(Z=r[D],P=g(Z,D),b=k.get(P),b===void 0){var $=m?m.e.nodes_start:l;f=Pt($,o,f,f===null?o.first:f.next,Z,P,D,p,h,x),k.set(P,f),_=[],i=[],m=f.next;continue}if($o(b,Z,D),(b.e.f&Je)!==0&&Bt(b.e),b!==m){if(R!==void 0&&R.has(b)){if(_.length<i.length){var I=i[0],T;f=I.prev;var K=_[0],J=_[_.length-1];for(T=0;T<_.length;T+=1)Rt(_[T],I,l);for(T=0;T<i.length;T+=1)R.delete(i[T]);Q(o,K.prev,J.next),Q(o,f,K),Q(o,J,I),m=I,f=J,D-=1,_=[],i=[]}else R.delete(b),Rt(b,m,l),Q(o,b.prev,b.next),Q(o,b,f===null?o.first:f.next),Q(o,f,b),f=b;continue}for(_=[],i=[];m!==null&&m.k!==P;)(m.e.f&Je)===0&&(R??=new Set).add(m),i.push(m),m=m.next;if(m===null)continue;b=m}_.push(b),f=b,m=b.next}if(m!==null||R!==void 0){for(var G=R===void 0?[]:jt(R);m!==null;)(m.e.f&Je)===0&&G.push(m),m=m.next;var ee=G.length;if(ee>0){var X=N===0?l:null;Ao(o,G,X,k)}}Ot.first=o.first&&o.first.e,Ot.last=f&&f.e}function $o(r,o,l,p){Qr(r.v,o),r.i=l}function Pt(r,o,l,p,h,g,x,N,k,A){var m=(k&ao)!==0,R=(k&so)===0,f=m?R?E(h,!1,!1):Ft(h):h,_=(k&Zr)===0?x:Ft(x),i={i:_,v:f,k:g,a:null,e:null,prev:l,next:p};try{return i.e=Gt(()=>N(r,f,_,A),j),i.e.prev=l&&l.e,i.e.next=p&&p.e,l===null?o.first=i:(l.next=i,l.e.next=i.e),p!==null&&(p.prev=i,p.e.prev=i.e),i}finally{}}function Rt(r,o,l){for(var p=r.next?r.next.e.nodes_start:l,h=o?o.e.nodes_start:l,g=r.e.nodes_start;g!==p;){var x=no(g);h.before(g),g=x}}function Q(r,o,l){o===null?r.first=l:(o.next=l,o.e.next=l&&l.e),l!==null&&(l.prev=o,l.e.prev=o&&o.e)}function To(r,o,l){var p=r==null?"":""+r;return p===""?null:p}function It(r,o,l,p,h,g){var x=r.__className;if(j||x!==l||x===void 0){var N=To(l);(!j||N!==r.getAttribute("class"))&&(N==null?r.removeAttribute("class"):r.className=N),r.__className=l}return g}const Mo=Symbol("is custom element"),Ho=Symbol("is html");function Ut(r){if(j){var o=!1,l=()=>{if(!o){if(o=!0,r.hasAttribute("value")){var p=r.value;qt(r,"value",null),r.value=p}if(r.hasAttribute("checked")){var h=r.checked;qt(r,"checked",null),r.checked=h}}};r.__on_r=l,io(l),wo()}}function qt(r,o,l,p){var h=Lo(r);j&&(h[o]=r.getAttribute(o),o==="src"||o==="srcset"||o==="href"&&r.nodeName==="LINK")||h[o]!==(h[o]=l)&&(o==="loading"&&(r[lo]=l),r.removeAttribute(o))}function Lo(r){return r.__attributes??={[Mo]:r.nodeName.includes("-"),[Ho]:r.namespaceURI===co}}function Ke(r,o,l=o){var p=uo();yo(r,"input",h=>{var g=h?r.defaultValue:r.value;if(g=Xe(r)?We(g):g,l(g),p&&g!==(g=o())){var x=r.selectionStart,N=r.selectionEnd;r.value=g??"",N!==null&&(r.selectionStart=x,r.selectionEnd=Math.min(N,r.value.length))}}),(j&&r.defaultValue!==r.value||O(o)==null&&r.value)&&l(Xe(r)?We(r.value):r.value),vo(()=>{var h=o();Xe(r)&&h===We(r.value)||r.type==="date"&&!h&&!r.value||h!==r.value&&(r.value=h??"")})}function Xe(r){var o=r.type;return o==="number"||o==="range"}function We(r){return r===""?null:+r}function Fo(r){return function(...o){var l=o[0];return l.preventDefault(),r?.apply(this,o)}}var Oo=q("<div> </div>"),Ro=q('<div class="text-xs text-gray-600 mt-1 space-y-0.5"><div> </div> <div> </div> <!></div>'),Io=po('<svg class="animate-spin h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),Uo=q('<div class="fixed top-20 right-4 bg-green-600 text-white px-4 py-3 rounded-lg shadow-lg z-20 flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> <span class="text-sm font-medium"> </span></div>'),qo=q('<div class="bg-red-50 border border-red-200 rounded-lg p-4 sm:p-6 mb-6 sm:mb-8 mx-2 sm:mx-0"><h3 class="text-red-800 font-semibold mb-2 text-sm sm:text-base">Error Loading Data</h3> <p class="text-red-600 mb-4 text-sm"> </p> <button class="w-full sm:w-auto px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors text-sm">Try Again</button></div>'),zo=q('<span class="text-xs px-2 py-1 bg-purple-100 text-purple-700 rounded-full font-medium">Custom</span>'),Bo=q('<div class="absolute top-0 right-0 flex gap-2"><button class="px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors text-sm shadow-sm" title="Edit voucher">Edit</button> <button class="px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 transition-colors text-sm shadow-sm" title="Delete voucher">Delete</button></div>'),Go=q('<div class="absolute top-0 right-0 flex gap-2"><button class="px-3 py-1 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors text-sm shadow-sm" title="Hide voucher">Hide</button></div>'),jo=q('<div class="mt-3 relative"><details class="w-full"><summary class="cursor-pointer text-sm font-semibold text-gray-700 hover:text-gray-900 py-1"> </summary> <div class="mt-3 p-3 bg-white rounded border text-sm space-y-2"><div><p class="text-gray-600 mt-1 leading-relaxed"> </p></div></div></details> <!></div>'),Po=q('<div><div class="mb-3"><button title="Click to copy voucher code" aria-label="Copy voucher code"><span class="flex-1 text-left"> </span> <div class="flex items-center gap-2 ml-2 flex-shrink-0"><!> <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg></div></button></div> <!></div>'),Jo=q('<div class="space-y-3 sm:space-y-4 mb-6 sm:mb-8"></div>'),Yo=q('<div class="text-center py-8 bg-gray-50 rounded-lg border border-gray-200"><p class="text-gray-500 mb-2">No vouchers available</p> <p class="text-sm text-gray-400">Add a custom voucher or refresh to fetch GrabFood vouchers</p></div>'),Ko=q('<div class="text-center py-8"><div class="inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"></div> <p class="text-gray-600 mt-2 text-sm">Fetching more vouchers...</p></div>'),Xo=q("<!> <!>",1),Wo=q(`<div class="h-screen flex flex-col"><div class="sticky top-0 z-10 bg-white border-b border-gray-200 shadow-sm"><div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4"><div class="flex flex-row items-start justify-between gap-4"><div class="flex-1"><h1 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900"> </h1> <!></div> <div class="flex flex-col gap-2 items-end flex-shrink-0"><button class="px-4 sm:px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium text-xs sm:text-sm whitespace-nowrap">Add Custom Voucher</button> <div class="flex gap-2"><button class="px-4 sm:px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium text-xs sm:text-sm whitespace-nowrap"><!></button> <button class="px-4 sm:px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-medium text-xs sm:text-sm whitespace-nowrap" title="Clear cache and fetch fresh data">Force</button></div></div></div></div></div> <div class="flex-1 overflow-y-auto"><div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-8"><!> <!> <!></div></div></div> <dialog class="p-0 rounded-lg shadow-xl max-w-md svelte-1w11x2y" style="margin: 1rem auto; width: calc(100% - 2rem);"><div class="p-6"><div class="flex justify-between items-center mb-4"><h3 class="text-lg font-semibold text-purple-800"> </h3> <button class="text-gray-400 hover:text-gray-600 transition-colors" aria-label="Close modal"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="mb-4 p-2 bg-blue-50 border border-blue-200 rounded-lg"><div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-blue-600 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <p class="text-xs text-blue-700">Only you can see this addition.</p></div></div> <form class="space-y-4"><div><label for="modal-voucher-code" class="block text-sm font-medium text-gray-700 mb-1">Voucher Code *</label> <input id="modal-voucher-code" type="text" placeholder="Enter voucher code" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"/></div> <div><label for="modal-voucher-cta" class="block text-sm font-medium text-gray-700 mb-1">Title *</label> <input id="modal-voucher-cta" type="text" placeholder="e.g., 'Save 20% on your order'" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"/></div> <div><label for="modal-voucher-description" class="block text-sm font-medium text-gray-700 mb-1">Description</label> <textarea id="modal-voucher-description" placeholder="Enter description (optional)" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"></textarea></div> <div class="flex gap-2 pt-4"><button type="submit" class="flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium text-sm"> </button> <button type="button" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium text-sm">Cancel</button></div></form></div></dialog> <dialog class="p-0 rounded-lg shadow-xl max-w-sm svelte-1w11x2y" style="margin: 1rem auto; width: calc(100% - 2rem);"><div class="p-6"><div class="flex items-center gap-3 mb-4"><div class="flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.502 0L4.312 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div> <div class="flex-1"><h3 class="text-lg font-semibold text-gray-900">Delete Voucher</h3> <p class="text-sm text-gray-600 mt-1"> </p></div></div> <div class="flex gap-3 justify-end"><button type="button" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium text-sm">Cancel</button> <button type="button" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium text-sm">Delete</button></div></div></dialog> <dialog class="p-0 rounded-lg shadow-xl max-w-sm svelte-1w11x2y" style="margin: 1rem auto; width: calc(100% - 2rem);"><div class="p-6"><div class="flex items-center gap-3 mb-4"><div class="flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-yellow-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L12 12"></path></svg></div> <div class="flex-1"><h3 class="text-lg font-semibold text-gray-900">Hide Voucher</h3> <p class="text-sm text-gray-600 mt-1"> </p></div></div> <div class="flex gap-3 justify-end"><button type="button" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium text-sm">Cancel</button> <button type="button" class="px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors font-medium text-sm">Hide</button></div></div></dialog> <dialog class="p-0 rounded-lg shadow-xl max-w-sm svelte-1w11x2y" style="margin: 1rem auto; width: calc(100% - 2rem);"><div class="p-6"><div class="flex items-center gap-3 mb-4"><div class="flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-orange-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.502 0L4.312 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg></div> <div class="flex-1"><h3 class="text-lg font-semibold text-gray-900">Force Refresh</h3> <p class="text-sm text-gray-600 mt-1">This will clear all cached data and fetch fresh vouchers. Any hidden
          vouchers will reappear. Continue?</p></div></div> <div class="flex gap-3 justify-end"><button type="button" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium text-sm">Cancel</button> <button type="button" class="px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-medium text-sm">Force Refresh</button></div></div></dialog>`,1);function Zo(r,o){fo(o,!1);const l=E(),p=E(),h=E(),g=E(),x=E(),N=E(),k="grabfood-voucher-cache",A=2*30*24*60*60*1e3,m=["NoCodeRequired","NoCouponRequired"];function R(t){return m.includes(t)}let f=E(!0),_=E(null),i=E([]),Z=[],P=[],b=E(null),D=null,$=E([]),I=E(null),T=E(""),K=E(""),J=E(""),G=E(),ee=E(),X=E(null),ue=E(),te=E(null),ve=E(),U=E([]);const Ze="grabfood-custom-vouchers",Qe=["NoCodeRequired","NoCouponRequired"];function Jt(){try{const t=localStorage.getItem(Ze);t&&u($,JSON.parse(t))}catch(t){console.error("Error loading custom vouchers:",t)}}function ke(){try{localStorage.setItem(Ze,JSON.stringify(e($)))}catch(t){console.error("Error saving custom vouchers:",t)}}function Yt(){try{u(U,[]);for(let t=0;t<localStorage.length;t++){const c=localStorage.key(t);if(c&&c.startsWith(k)){const d=localStorage.getItem(c);if(d&&JSON.parse(d).hidden){const L=c.replace(`${k}-`,"");e(U).push(L)}}}u(U,[...e(U)])}catch(t){console.error("Error loading hidden vouchers:",t)}}function Kt(t){if(!e(U).includes(t)){let c=et(t);c||(c={code:null,expire:Date.now()+A,hidden:!1});const d={...c,expire:Date.now()+A,hidden:!0};localStorage.setItem(`${k}-${t}`,JSON.stringify(d)),u(U,[...e(U),t])}}function Xt(){if(!e(T).trim())return;const t={id:Date.now().toString(),code:e(T).trim(),description:e(K).trim()||"Custom voucher",cta:e(J).trim()||"Use this code"};u($,[t,...e($)]),ke(),Ee(),e(G).close()}function Wt(){!e(I)||!e(T).trim()||(u($,e($).map(t=>t.id===e(I).id?{...t,code:e(T).trim(),description:e(K).trim()||"Custom voucher",cta:e(J).trim()||"Use this code"}:t)),ke(),Ee(),e(G).close())}function Zt(t){u($,e($).filter(c=>c.id!==t)),ke()}function Qt(t){u(X,t),e(ee).showModal()}function er(){e(X)&&(Zt(e(X).id),u(X,null)),e(ee).close()}function tr(){u(X,null),e(ee).close()}function rr(t){u(te,t),e(ue).showModal()}function or(){e(te)&&(Kt(e(te).id),u(te,null)),e(ue).close()}function ar(){u(te,null),e(ue).close()}function sr(){e(ve).showModal()}function nr(){e(ve).close(),fr()}function ir(){e(ve).close()}function lr(t){u(I,t),u(T,t.code),u(K,t.description),u(J,t.cta),e(G).showModal()}function Ee(){u(I,null),u(T,""),u(K,""),u(J,"")}function et(t){try{const c=localStorage.getItem(`${k}-${t}`);if(!c)return null;const d=JSON.parse(c);return Date.now()>d.expire?(localStorage.removeItem(`${k}-${t}`),null):d}catch(c){return console.error("Error reading cache for",t,c),null}}function tt(t){try{const c=localStorage.getItem(`${k}-${t}`);if(!c)return null;const d=JSON.parse(c);return Date.now()>d.expire?(localStorage.removeItem(`${k}-${t}`),null):{code:d.code,cta:d.cta,headline:d.headline,description:d.description,merchantName:d.merchantName}}catch(c){return console.error("Error reading cache for",t,c),null}}function cr(t,c){try{const d=et(t),M={...c,expire:Date.now()+A,hidden:d?.hidden||!1};localStorage.setItem(`${k}-${t}`,JSON.stringify(M))}catch(d){console.error("Error caching data for",t,d)}}function dr(){try{Object.keys(localStorage).forEach(c=>{c.startsWith(k)&&localStorage.removeItem(c)}),console.log("Voucher cache cleared")}catch(t){console.error("Error clearing cache:",t)}}async function ur(t){const c=tt(t);if(c)return console.log(`Using cached data for article ${t}`),c;try{const d=`https://www.philstar.com/coupons/api/offers/16/en/${t}`,L=await fetch("https://corsproxy.io/?"+encodeURIComponent(d));if(!L.ok)return console.error(`API request failed for ${t}: ${L.status}`),null;const V=await L.json();console.log("data",V);const w={code:null,cta:`${V.cta.heading} ${V.cta.value}`.trim(),headline:V.headline||V.title||"No headline available",description:V.description||V.content||"No description available",merchantName:V.merchant?.name||"Unknown merchant"};if(V&&V.code){const y=V.code.replace(/[^A-Za-z0-9]/g,"");R(y)||(w.code=y)}return cr(t,w),console.log(`Cached data for article ${t}`),w}catch(d){return console.error(`Error fetching voucher code for ${t}:`,d),null}}async function pe(){try{u(f,!0),u(_,null);const t=["https://www.philstar.com/coupons/grabfood","https://www.philstar.com/coupons/foodpanda"],c="https://corsproxy.io/?",d=[],M=[];for(const C of t){console.log(`Fetching from: ${C}`);const w=await fetch(c+encodeURIComponent(C));if(!w.ok){console.error(`HTTP error for ${C}! status: ${w.status}`);continue}const y=await w.text();new DOMParser().parseFromString(y,"text/html").querySelectorAll('article[data-type="code"]').forEach(re=>{const oe=(re.getAttribute("id")||"").replace(/[^A-Za-z0-9]/g,""),ae=re.getAttribute("data-type")||"";if(oe&&ae==="code"){const le=re.querySelector('h3, .title, [class*="title"]')?.textContent?.trim()||"No title found",Ue=re.querySelector('p, .description, [class*="description"]')?.textContent?.trim()||"No description found",ze=re.querySelector('.cta, .call-to-action, [class*="cta"], button, .btn, [class*="button"]')?.textContent?.trim()||"View Offer";d.push({id:oe,dataType:ae,title:le,content:Ue,cta:ze}),M.push(oe)}})}u(i,d),Z=M,console.log('Found article IDs with data-type="code":',M),P=[],u(i,[...d]),console.log("Fetching coupon codes...");let L=0,V=0;for(let C=0;C<d.length;C++){const w=d[C],y=tt(w.id);if(console.log("cachedDATa",y),y)console.log(`Using cached data for article ${C+1}/${d.length}: ${w.id}`),L++,y.code&&(Y(i,e(i)[C].couponCode=y.code),Y(i,e(i)[C].cta=y.cta),Y(i,e(i)[C].headline=y.headline),Y(i,e(i)[C].description=y.description),Y(i,e(i)[C].merchantName=y.merchantName),u(i,[...e(i)]));else{console.log(`Fetching from API for article ${C+1}/${d.length}: ${w.id}`),V++;const F=await ur(w.id);F&&F.code&&(Y(i,e(i)[C].couponCode=F.code),Y(i,e(i)[C].cta=F.cta),Y(i,e(i)[C].headline=F.headline),Y(i,e(i)[C].description=F.description),Y(i,e(i)[C].merchantName=F.merchantName),u(i,[...e(i)])),await new Promise(n=>setTimeout(n,500))}}console.log(`Cache performance - Hits: ${L}, API calls: ${V}`),console.log("Progressive loading completed")}catch(t){u(_,t instanceof Error?t.message:"An unknown error occurred"),console.error("Error fetching GrabFood vouchers:",t)}finally{u(f,!1)}}Co(()=>{pe(),Jt(),Yt()});function vr(t){navigator.clipboard.writeText(t).then(()=>{D&&clearTimeout(D),u(b,t),D=setTimeout(()=>{u(b,null),D=null},2e3)})}async function fr(){dr(),await pe()}de(()=>(e(i),e(U)),()=>{u(l,e(i).filter(t=>t.couponCode&&!Qe.includes(t.couponCode)&&!e(U).includes(t.id||"")).map(t=>t.couponCode))}),de(()=>(e(i),e(U)),()=>{u(p,e(i).filter(t=>!Qe.includes(t.couponCode||"")&&!e(U).includes(t.id||"")))}),de(()=>(e($),e(p)),()=>{u(h,[...e($).map(t=>({...t,isCustom:!0,voucherCode:t.code,cta:t.cta,description:t.description})),...e(p).map(t=>({...t,isCustom:!1,voucherCode:t.couponCode}))])}),de(()=>e($),()=>{u(g,e($).filter(t=>t.code&&t.code.trim()!==""&&t.code!=="No code found").length)}),de(()=>e(p),()=>{u(x,e(p).filter(t=>t.couponCode&&t.couponCode.trim()!==""&&t.couponCode!=="No code found").length)}),de(()=>(e(g),e(x)),()=>{u(N,e(g)+e(x))}),mo(),No();var rt=Wo(),Ne=Ye(rt),De=s(Ne),ot=s(De),at=s(ot),Ae=s(at),Ve=s(Ae),mr=s(Ve);a(Ve);var hr=v(Ve,2);{var pr=t=>{var c=Ro(),d=s(c),M=s(d);a(d);var L=v(d,2),V=s(L);a(L);var C=v(L,2);{var w=y=>{var F=Oo(),n=s(F);a(F),ie(()=>z(n,`${e(U),O(()=>e(U).length)??""} Hidden`)),S(y,F)};B(C,y=>{e(U),O(()=>e(U).length>0)&&y(w)})}a(c),ie(()=>{z(M,`${e(g)??""} Custom`),z(V,`${e(x)??""} GrabFood`)}),S(t,c)};B(hr,t=>{(e(g)>0||e(x)>0)&&t(pr)})}a(Ae);var st=v(Ae,2),nt=s(st),it=v(nt,2),fe=s(it),gr=s(fe);{var xr=t=>{var c=Io();S(t,c)},br=t=>{var c=go("Refresh");S(t,c)};B(gr,t=>{e(f)?t(xr):t(br,!1)})}a(fe);var lt=v(fe,2);a(it),a(st),a(at),a(ot),a(De);var ct=v(De,2),dt=s(ct),ut=s(dt);{var _r=t=>{var c=Uo(),d=v(s(c),2),M=s(d);a(d),a(c),ie(()=>z(M,`Copied "${e(b)??""}"!`)),S(t,c)};B(ut,t=>{e(b)&&t(_r)})}var vt=v(ut,2);{var wr=t=>{var c=qo(),d=v(s(c),2),M=s(d,!0);a(d);var L=v(d,2);a(c),ie(()=>z(M,e(_))),H("click",L,pe),S(t,c)};B(vt,t=>{e(_)&&t(wr)})}var yr=v(vt,2);{var Cr=t=>{var c=Xo(),d=Ye(c);{var M=w=>{var y=Jo();Vo(y,5,()=>e(h),Do,(F,n)=>{var me=xo(),re=Ye(me);{var $t=oe=>{var ae=Po(),_e=s(ae),le=s(_e),we=s(le),Ue=s(we,!0);a(we);var qe=v(we,2),ze=s(qe);{var Mr=W=>{var se=zo();S(W,se)};B(ze,W=>{e(n),O(()=>e(n).isCustom)&&W(Mr)})}bo(2),a(qe),a(le),a(_e);var Hr=v(_e,2);{var Lr=W=>{var se=jo(),Be=s(se),Ge=s(Be),Fr=s(Ge,!0);a(Ge);var Tt=v(Ge,2),Mt=s(Tt),Ht=s(Mt),Or=s(Ht,!0);a(Ht),a(Mt),a(Tt),a(Be);var Rr=v(Be,2);{var Ir=ce=>{var ne=Bo(),ye=s(ne),qr=v(ye,2);a(ne),H("click",ye,()=>lr({id:e(n).id,code:e(n).voucherCode||"",description:e(n).description||"",cta:e(n).cta||""})),H("click",qr,()=>Qt({id:e(n).id,code:e(n).voucherCode||"",description:e(n).description||"",cta:e(n).cta||""})),S(ce,ne)},Ur=ce=>{var ne=Go(),ye=s(ne);a(ne),H("click",ye,()=>rr({id:e(n).id,voucherCode:e(n).voucherCode||""})),S(ce,ne)};B(Rr,ce=>{e(n),O(()=>e(n).isCustom)?ce(Ir):ce(Ur,!1)})}a(se),ie(()=>{z(Fr,(e(n),O(()=>e(n).cta||"View Details"))),z(Or,(e(n),O(()=>e(n).description||"No description available")))}),S(W,se)};B(Hr,W=>{e(n),O(()=>e(n).cta||!e(n).isCustom&&e(n).headline||e(n).description)&&W(Lr)})}a(ae),ie((W,se)=>{It(ae,1,`p-3 sm:p-4 rounded-lg border ${e(n),O(()=>e(n).merchantName)??""} ${W??""}`),It(le,1,`w-full text-base sm:text-lg font-bold font-mono bg-white px-3 py-2 rounded border break-all flex items-center justify-between hover:bg-gray-50 transition-colors cursor-pointer ${se??""}`),z(Ue,(e(n),O(()=>e(n).voucherCode)))},[()=>(e(n),O(()=>e(n).isCustom?"bg-gradient-to-r from-purple-50 to-pink-50 border-purple-200":"merchantName"in e(n)&&e(n).merchantName?.toLowerCase().includes("grabfood")||"merchantName"in e(n)&&e(n).merchantName?.toLowerCase().includes("grab")?"bg-gradient-to-r from-green-50 to-emerald-50 border-green-200":"merchantName"in e(n)&&e(n).merchantName?.toLowerCase().includes("foodpanda")?"bg-gradient-to-r from-pink-50 to-red-50 border-pink-200":"bg-gradient-to-r from-gray-50 to-slate-50 border-gray-200")),()=>(e(n),O(()=>e(n).isCustom?"text-purple-700":"merchantName"in e(n)&&e(n).merchantName?.toLowerCase().includes("grabfood")||"merchantName"in e(n)&&e(n).merchantName?.toLowerCase().includes("grab")?"text-green-700":"merchantName"in e(n)&&e(n).merchantName?.toLowerCase().includes("foodpanda")?"text-pink-700":"text-gray-700"))],zt),H("click",le,()=>vr(e(n).voucherCode||"")),S(oe,ae)};B(re,oe=>{e(n),O(()=>e(n).voucherCode)&&oe($t)})}S(F,me)}),a(y),S(w,y)},L=(w,y)=>{{var F=n=>{var me=Yo();S(n,me)};B(w,n=>{e(f)||n(F)},y)}};B(d,w=>{e(h),O(()=>e(h).length>0)?w(M):w(L,!1)})}var V=v(d,2);{var C=w=>{var y=Ko();S(w,y)};B(V,w=>{e(f)&&w(C)})}S(t,c)};B(yr,t=>{e(_)||t(Cr)})}a(dt),a(ct),a(Ne);var ge=v(Ne,2),ft=s(ge),Se=s(ft),$e=s(Se),kr=s($e);a($e);var Er=v($e,2);a(Se);var Te=v(Se,4),Me=s(Te),mt=v(s(Me),2);Ut(mt),a(Me);var He=v(Me,2),ht=v(s(He),2);Ut(ht),a(He);var Le=v(He,2),pt=v(s(Le),2);ko(pt),a(Le);var gt=v(Le,2),Fe=s(gt),Nr=s(Fe);a(Fe);var Dr=v(Fe,2);a(gt),a(Te),a(ft),a(ge),Ce(ge,t=>u(G,t),()=>e(G));var xe=v(ge,2),xt=s(xe),Oe=s(xt),bt=v(s(Oe),2),_t=v(s(bt),2),Ar=s(_t);a(_t),a(bt),a(Oe);var wt=v(Oe,2),yt=s(wt),Vr=v(yt,2);a(wt),a(xt),a(xe),Ce(xe,t=>u(ee,t),()=>e(ee));var be=v(xe,2),Ct=s(be),Re=s(Ct),kt=v(s(Re),2),Et=v(s(kt),2),Sr=s(Et);a(Et),a(kt),a(Re);var Nt=v(Re,2),Dt=s(Nt),$r=v(Dt,2);a(Nt),a(Ct),a(be),Ce(be,t=>u(ue,t),()=>e(ue));var Ie=v(be,2),At=s(Ie),Vt=v(s(At),2),St=s(Vt),Tr=v(St,2);a(Vt),a(At),a(Ie),Ce(Ie,t=>u(ve,t),()=>e(ve)),ie(()=>{z(mr,`${e(N)??""} Codes`),fe.disabled=e(f),lt.disabled=e(f),z(kr,`${e(I)?"Edit":"Add"} Custom Voucher`),z(Nr,`${e(I)?"Update":"Add"} Voucher`),z(Ar,`Are you sure you want to delete "${e(X),O(()=>e(X)?.code)??""}"? This action
          cannot be undone.`),z(Sr,`Are you sure you want to hide "${e(te),O(()=>e(te)?.voucherCode)??""}"? Hidden
          vouchers will reappear when you force refresh the page.`)}),H("click",nt,()=>{Ee(),e(G).showModal()}),H("click",fe,pe),H("click",lt,sr),H("click",Er,()=>e(G).close()),Ke(mt,()=>e(T),t=>u(T,t)),Ke(ht,()=>e(J),t=>u(J,t)),Ke(pt,()=>e(K),t=>u(K,t)),H("click",Dr,()=>e(G).close()),H("submit",Te,Fo(function(...t){(e(I)?Wt:Xt)?.apply(this,t)})),H("click",yt,tr),H("click",Vr,er),H("click",Dt,ar),H("click",$r,or),H("click",St,ir),H("click",Tr,nr),S(r,rt),ho()}var Qo=q('<meta name="description" content="Get the latest GrabFood vouchers. Save money on your food delivery orders with verified promo codes from restaurants across the Philippines."/>');function ia(r){Eo(o=>{var l=Qo();_o.title="GrabFood Voucher Codes",S(o,l)}),Zo(r,{})}export{ia as component};
